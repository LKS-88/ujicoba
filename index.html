<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APLIKASI BARJAS LENTERA KARYA SITUBONDO</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <style>
        :root {
            --primary-color: #0d47a1;
            --secondary-color: #00695c;
            --accent-color: #ff8f00;
            --light-blue: #e3f2fd;
            --dark-blue: #082e5c;
            --gradient-primary: linear-gradient(135deg, var(--primary-color), var(--dark-blue));
            --gradient-secondary: linear-gradient(135deg, var(--secondary-color), #004d40);
            --gradient-accent: linear-gradient(135deg, var(--accent-color), #e65100);
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 28px rgba(0,0,0,0.15);
             --login-gradient: linear-gradient(135deg, #0d47a1, #00695c, #ff8f00);
        }
          }
        
        body {
            background: linear-gradient(135deg, #f5f9ff 0%, #e8f5e9 100%);
            font-family: 'Poppins', 'Segoe UI', sans-serif;
            min-height: 100vh;
            padding: 10px 0;
            overflow-x: hidden;
        }
        
        .app-container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            box-shadow: var(--shadow-lg);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            z-index: 10;
        }
        
        .app-header {
            background: var(--gradient-primary);
            color: white;
            padding: 20px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .app-logo {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .app-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin: 0;
        }
        
        .app-subtitle {
            font-size: 1rem;
            opacity: 0.95;
            font-weight: 300;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        
        .nav-pills .nav-link {
            border-radius: 8px;
            margin-bottom: 8px;
            padding: 12px 15px;
            font-weight: 500;
            color: #444;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .nav-pills .nav-link:hover {
            background-color: #f0f7ff;
            transform: translateX(3px);
        }
        
        .nav-pills .nav-link.active {
            background: var(--gradient-primary);
            font-weight: 600;
            box-shadow: var(--shadow-md);
            transform: translateX(3px);
            color: white;
        }
        
        .section-title {
            border-left: 4px solid var(--primary-color);
            padding-left: 12px;
            margin: 20px 0;
            font-weight: 700;
            color: var(--dark-blue);
            font-size: 1.4rem;
        }
        
        /* PERBAIKAN TATA LETAK SIDEBAR */
        .col-md-3.col-lg-2.p-4.bg-light {
            min-height: calc(100vh - 80px);
            position: sticky;
            top: 0;
            overflow-y: auto;
        }
        
        /* Untuk tampilan mobile */
        @media (max-width: 991.98px) {
            .col-md-3.col-lg-2.p-4.bg-light {
                position: fixed;
                left: -280px;
                top: 0;
                bottom: 0;
                z-index: 1050;
                width: 280px;
                transition: left 0.3s ease;
                padding-top: 60px;
            }
            
            .col-md-3.col-lg-2.p-4.bg-light.mobile-show {
                left: 0;
            }
            
            .col-md-9.col-lg-10.p-5 {
                width: 100%;
                flex: 0 0 100%;
                max-width: 100%;
                padding: 15px !important;
            }
            
            .mobile-menu-btn {
                display: flex !important;
                position: fixed;
                top: 15px;
                left: 15px;
                z-index: 1050;
                background: var(--gradient-primary);
                color: white;
                border: none;
                border-radius: 50%;
                width: 45px;
                height: 45px;
                box-shadow: var(--shadow-lg);
                align-items: center;
                justify-content: center;
            }
            
            .sidebar-overlay.mobile-show {
                display: block;
            }
        }
        
        .mobile-menu-btn {
            display: none;
        }
        
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1040;
        }
        
        .watermark {
            position: absolute;
            bottom: 10px;
            right: 15px;
            opacity: 0.8;
            font-size: 0.8rem;
            color: white;
            font-weight: 300;
        }
        
        body {
            background: linear-gradient(135deg, #f5f9ff 0%, #e8f5e9 100%);
            font-family: 'Poppins', 'Segoe UI', sans-serif;
            min-height: 100vh;
            padding: 10px 0;
            overflow-x: hidden;
        }
        
        /* Container untuk particles.js */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
        }
        
        .app-container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            box-shadow: var(--shadow-lg);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            z-index: 10;
        }
        
        .app-header {
            background: var(--gradient-primary);
            color: white;
            padding: 20px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .app-header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
            pointer-events: none;
        }
        
        .app-logo {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .app-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin: 0;
            position: relative;
            z-index: 1;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
        }
        
        .app-subtitle {
            font-size: 1rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 300;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        
        .nav-pills .nav-link {
            border-radius: 8px;
            margin-bottom: 8px;
            padding: 12px 15px;
            font-weight: 500;
            color: #444;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .nav-pills .nav-link:hover {
            background-color: #f0f7ff;
            transform: translateX(3px);
        }
        
        .nav-pills .nav-link.active {
            background: var(--gradient-primary);
            font-weight: 600;
            box-shadow: var(--shadow-md);
            transform: translateX(3px);
        }
        
        .section-title {
            border-left: 4px solid var(--primary-color);
            padding-left: 12px;
            margin: 20px 0;
            font-weight: 700;
            color: var(--dark-blue);
            font-size: 1.4rem;
            position: relative;
        }
        
        .section-title::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 12px;
            width: 40px;
            height: 2px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-success {
            background: var(--gradient-secondary);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-warning {
            background: var(--gradient-accent);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .form-label {
            font-weight: 600;
            color: #444;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .form-label i {
            margin-right: 6px;
            color: var(--primary-color);
        }
        
        .form-control, .form-select {
            border-radius: 8px;
            padding: 12px 15px;
            border: 1px solid #ddd;
            transition: all 0.3s;
            box-shadow: var(--shadow-sm);
            font-size: 0.9rem;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.2);
            transform: translateY(-2px);
        }
        
        .copyright {
            text-align: center;
            padding: 20px;
            background-color: var(--light-blue);
            color: var(--dark-blue);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .data-table {
            font-size: 0.85rem;
            border-collapse: separate;
            border-spacing: 0;
            box-shadow: var(--shadow-sm);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .data-table th {
            background: var(--gradient-primary);
            color: white;
            font-weight: 600;
            padding: 12px 10px;
            text-align: center;
            position: relative;
            font-size: 0.85rem;
        }
        
        .data-table th::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: rgba(255,255,255,0.3);
        }
        
        .data-table td {
            padding: 10px 8px;
            vertical-align: middle;
            border-bottom: 1px solid #eee;
            font-size: 0.85rem;
        }
        
        .data-table tr:nth-child(even) {
            background-color: #f9fbff;
        }
        
        .data-table tr:hover {
            background-color: #edf5ff;
        }
        
        .feature-icon {
            font-size: 1.1rem;
            margin-right: 8px;
            width: 24px;
            text-align: center;
        }
        
        .password-modal .modal-content {
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            border: none;
        }
        
        .card {
            border-radius: 10px;
            border: none;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .card-header {
            border-radius: 10px 10px 0 0 !important;
            font-weight: 600;
            padding: 15px 20px;
            background: var(--gradient-primary);
            color: white;
            font-size: 0.95rem;
        }
        
        .stats-box {
            text-align: center;
            padding: 20px 15px;
            border-radius: 10px;
            background: white;
            box-shadow: var(--shadow-md);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .stats-box::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }
        
        .stats-box:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }
        
        .stats-number {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary-color);
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .stats-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .notification-toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1050;
            min-width: 280px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            max-width: calc(100vw - 40px);
        }
        
        .input-error {
            border-color: #dc3545;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2);
        }
        
        .error-message {
            color: #dc3545;
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
            font-weight: 500;
        }
        
        .watermark {
            position: absolute;
            bottom: 10px;
            right: 15px;
            opacity: 0.8;
            font-size: 0.8rem;
            color: white;
            font-weight: 300;
        }
        
        .control-panel {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            box-shadow: var(--shadow-sm);
        }
        
        .control-title {
            font-size: 1rem;
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--light-blue);
        }
        
        .floating-action-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .floating-action-btn:hover {
            transform: scale(1.1) rotate(90deg);
        }
        
        .filter-section {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }
        
        .badge-custom {
            background: var(--gradient-primary);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1050;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            box-shadow: var(--shadow-lg);
        }
        
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1040;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--dark-blue);
        }
        
        /* Responsive styles */
        @media (max-width: 991.98px) {
            .col-md-3.col-lg-2 {
                position: fixed;
                left: -300px;
                top: 0;
                bottom: 0;
                z-index: 1050;
                width: 280px;
                transition: left 0.3s ease;
                overflow-y: auto;
                padding-top: 60px;
            }
            
            .col-md-3.col-lg-2.mobile-show {
                left: 0;
            }
            
            .col-md-9.col-lg-10 {
                width: 100%;
                flex: 0 0 100%;
                max-width: 100%;
            }
            
            .mobile-menu-btn {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .sidebar-overlay.mobile-show {
                display: block;
            }
        }
        
        /* Print Styles - IMPROVED FOR LANDSCAPE */
        @media print {
            @page {
                size: landscape;
                margin: 0.5cm;
            }
            
            body * {
                visibility: hidden;
            }
            
            .app-container, .app-container * {
                visibility: visible;
            }
            
            .app-container {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                box-shadow: none;
            }
            
            .nav-pills, .mobile-menu-btn, .sidebar-overlay, .floating-action-btn,
            .btn-group, .filter-section, .toast {
                display: none !important;
            }
            
            .col-md-3.col-lg-2.p-4.bg-light {
                display: none !important;
            }
            
            .col-md-9.col-lg-10.p-5 {
                width: 100%;
                flex: 0 0 100%;
                max-width: 100%;
                padding: 0 !important;
            }
            
            .copyright {
                display: none;
            }
            
            .data-table {
                font-size: 10px;
                width: 100% !important;
            }
            
            .data-table th, .data-table td {
                padding: 4px 2px;
            }
            
            /* Sembunyikan kolom aksi dan link Google Drive saat mencetak */
            .data-table th:last-child,
            .data-table td:last-child {
                display: none !important;
            }
            
            /* Judul untuk laporan cetak */
            .print-header {
                display: block !important;
                text-align: center;
                margin-bottom: 15px;
            }
            
            .print-title {
                font-size: 18px;
                font-weight: bold;
                margin-bottom: 5px;
            }
            
            .print-subtitle {
                font-size: 14px;
                margin-bottom: 10px;
            }
            
            .print-date {
                font-size: 12px;
                text-align: right;
                margin-bottom: 10px;
            }
        }

        /* Styling untuk form link Google Drive */
        .link-section {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }

        .link-section-title {
            font-size: 1.1rem;
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #dee2e6;
        }

        .link-input-group {
            margin-bottom: 10px;
        }
        
        /* GPS Button */
        .gps-button {
            margin-top: 8px;
            padding: 8px 12px;
            font-size: 0.85rem;
        }
        
        /* View Links Modal */
        .links-modal .modal-dialog {
            max-width: 800px;
        }
        
        .link-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .link-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .link-label {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--primary-color);
        }
        
        .link-url {
            word-break: break-all;
            margin-bottom: 5px;
        }
        
        /* Security code hidden by default */
        .security-code {
            display: none;
        }
        
        /* Print header hidden by default */
        .print-header {
            display: none;
        }
        
        /* WhatsApp link style */
        .whatsapp-link {
            color: #25D366;
            text-decoration: none;
        }
        
        .whatsapp-link:hover {
            text-decoration: underline;
        }
        
        /* View Link Button */
        .btn-view {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .btn-view:hover {
            background: linear-gradient(135deg, #138496, #117a8b);
            color: white;
        }
        
        /* Undo Button */
        .btn-undo {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            border: none;
        }
        
        .btn-undo:hover {
            background: linear-gradient(135deg, #5a6268, #4e555b);
            color: white;
        }
        
        /* WhatsApp number link in table */
        .whatsapp-number {
            color: #25D366;
            cursor: pointer;
            text-decoration: underline;
        }
        
        /* Welcome Modal Styles */
        .welcome-modal .modal-content {
            border-radius: 15px;
            overflow: hidden;
            border: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .welcome-header {
            background: var(--gradient-primary);
            color: white;
            text-align: center;
            padding: 25px;
        }
        
        .welcome-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .welcome-body {
            padding: 25px;
            text-align: center;
        }
        
        .welcome-footer {
            background: #f8f9fa;
            padding: 15px;
            text-align: center;
            border-top: 1px solid #eee;
        }
        
        .countdown-timer {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 10px;
        }
        
        /* Button untuk cetak per data */
        .btn-print-individual {
            background: linear-gradient(135deg, #6f42c1, #5a2d95);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .btn-print-individual:hover {
            background: linear-gradient(135deg, #5a2d95, #4a2479);
            color: white;
        }
        
        /* Developer Info Styles */
        .developer-info {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: var(--shadow-sm);
        }
        
        .developer-logo {
            max-width: 120px;
            margin-bottom: 15px;
            border-radius: 8px;
        }
        
        .developer-contact a {
            color: var(--primary-color);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .developer-contact a:hover {
            color: var(--dark-blue);
            text-decoration: underline;
        }
        
        /* Welcome Splash Screen */
        .welcome-splash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        
        .welcome-splash-content {
            text-align: center;
            max-width: 600px;
            padding: 30px;
        }
        
        .welcome-splash-logo {
            font-size: 4rem;
            margin-bottom: 20px;
        }
        
        .welcome-splash-title {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 15px;
        }
        
        .welcome-splash-message {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 25px;
        }
        
        .welcome-splash-countdown {
            font-size: 1rem;
            margin-top: 20px;
        }
        
        .welcome-splash-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .welcome-splash-close:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(90deg);
        }
        
        /* Map Autocomplete */
        .pac-container {
            z-index: 1060 !important;
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            border: none;
            margin-top: 5px;
        }
        
        .pac-item {
            padding: 8px 10px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
        }
        
        .pac-item:hover {
            background-color: #f5f5f5;
        }
        
        .pac-item-query {
            font-size: 0.9rem;
            color: var(--primary-color);
        }
        
        /* Loading spinner */
        .spinner-border-sm {
            width: 1rem;
            height: 1rem;
        }

        /* Login Modal Styles */
.login-modal .modal-content {
    border-radius: 15px;
    overflow: hidden;
    border: none;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}

.login-header {
    background: var(--login-gradient);
    color: white;
    text-align: center;
    padding: 25px 20px;
    position: relative;
}

.login-icon {
    font-size: 3rem;
    margin-bottom: 15px;
    color: white;
}

.login-title {
    font-size: 1.8rem;
    font-weight: 700;
    margin: 0;
}

.login-subtitle {
    font-size: 1rem;
    opacity: 0.9;
    margin: 5px 0 0;
}

.login-body {
    padding: 25px;
}

.login-form-group {
    margin-bottom: 20px;
}

.login-form-label {
    font-weight: 600;
    color: var(--dark-blue);
    margin-bottom: 8px;
    display: flex;
    align-items: center;
}

.login-form-label i {
    margin-right: 10px;
    color: var(--dark-blue);
}

.login-form-control {
    border-radius: 8px;
    padding: 12px 15px;
    border: 2px solid #ddd;
    transition: all 0.3s;
}

.login-form-control:focus {
    border-color: var(--dark-blue);
    box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.2);
}

.login-input-group-text {
    background: var(--light-blue);
    border: 2px solid #ddd;
    border-left: none;
}

.btn-login {
    background: var(--gradient-secondary);
    color: white;
    border: none;
    padding: 12px;
    font-weight: 600;
    border-radius: 8px;
    width: 100%;
    transition: all 0.3s;
    margin-top: 10px;
}

.btn-login:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 105, 92, 0.4);
}

.btn-login:disabled {
    background: #ccc;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

.login-security-notice {
    text-align: center;
    margin-top: 20px;
    font-size: 0.85rem;
    color: #666;
}

.login-attempts-count {
    text-align: center;
    font-size: 0.9rem;
    color: #ff8f00;
    font-weight: 500;
    margin-top: 5px;
}

.login-blocked-message {
    text-align: center;
    background: rgba(220, 53, 69, 0.1);
    border-radius: 8px;
    padding: 15px;
    margin-top: 20px;
    color: #dc3545;
    font-weight: 500;
}

.login-countdown {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--dark-blue);
}

.login-developer-info {
    background: var(--light-blue);
    border-radius: 10px;
    padding: 20px;
    margin-top: 25px;
    text-align: center;
}

.login-developer-logo {
    max-width: 180px;
    margin-bottom: 15px;
    border-radius: 8px;
}

.login-developer-contact a {
    color: var(--dark-blue);
    text-decoration: none;
    transition: all 0.3s;
    display: inline-block;
    margin: 5px 0;
}

.login-developer-contact a:hover {
    color: var(--primary-color);
    text-decoration: underline;
    transform: translateY(-2px);
}

.login-copyright {
    text-align: center;
    margin-top: 20px;
    color: #666;
    font-size: 0.9rem;
    opacity: 0.9;
}

/* Animations */
@keyframes login-shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
    20%, 40%, 60%, 80% { transform: translateX(10px); }
}

.login-shake {
    animation: login-shake 0.6s cubic-bezier(.36,.07,.19,.97) both;
}

/* Login particle background */
#login-particles {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1040; /* Higher than modal backdrop */
    display: none;
}

        /* Tambahkan di bagian CSS Anda */
.custom-marker {
    background: transparent;
    border: none;
}

.leaflet-container {
    height: 500px;
    width: 100%;
    border-radius: 8px;
}
    </style>
</head>
<body>
    <!-- TAMBAHKAN KODE DIBAWAH INI SEBELUM </body> -->
       <!-- Login Modal -->
        <div class="modal fade login-modal" id="loginModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="login-header">
                        <div class="login-icon">
                            <i class="fas fa-lock"></i>
                        </div>
                        <h2 class="login-title">AUTHENTICATION REQUIRED</h2>
                        <p class="login-subtitle">Masukkan Kode Keamanan untuk Mengakses Aplikasi</p>
                    </div>
                    <div class="login-body">
                        <form id="loginForm">
                            <div class="mb-3 login-form-group">
                                <label class="form-label login-form-label">
                                    <i class="fas fa-key"></i> Kode Keamanan
                                </label>
                                <div class="input-group">
                                    <input type="password" class="form-control login-form-control" id="securityCode" placeholder="Masukkan kode akses aplikasi">
                                    <button class="btn btn-outline-secondary toggle-password" type="button">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="form-text text-danger login-attempts-count" id="attemptsCount"></div>
                            </div>
                            <button type="submit" class="btn btn-login" id="loginButton">
                                <span class="login-button-text">Masuk ke Aplikasi</span>
                                <span class="spinner-border spinner-border-sm d-none" id="loginSpinner"></span>
                            </button>
                        </form>
                        
                        <div class="login-blocked-message d-none" id="blockedMessage">
                            <i class="fas fa-ban me-2"></i>
                            <span id="blockedText">Terlalu banyak percobaan gagal. Silakan coba lagi dalam </span>
                            <span class="login-countdown" id="countdown">30</span> detik.
                        </div>
                        
                        <div class="login-security-notice">
                            <i class="fas fa-info-circle me-2"></i>
                            Hubungi Administrator untuk mendapatkan kode akses
                        </div>
                        
                        <div class="login-developer-info">
                            <h5 class="mb-3">Developer Information</h5>
                            <div class="login-developer-contact">
                                <p><i class="fab fa-whatsapp me-2"></i> <a href="https://wa.me/6285647709114" target="_blank">+62 856-4770-9114</a></p>
                                <p><i class="fas fa-envelope me-2"></i> <a href="mailto:admin@anekamarket.my.id">admin@anekamarket.my.id</a></p>
                            </div>
                        </div>
                        
                        <div class="login-copyright">
                            &copy; 2025 Lentera karya Situbondo
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Login particle background -->
        <div id="login-particles"></div>
        
        <!-- Welcome Splash Screen -->
        <div class="welcome-splash" id="welcomeSplash">
            <button class="welcome-splash-close" id="closeSplash">
                <i class="fas fa-times"></i>
            </button>
            <div class="welcome-splash-content">
                <div class="welcome-splash-logo">
                    <i class="fas fa-cow"></i>
                </div>
                <h1 class="welcome-splash-title">BARJAS LENTERA KARYA SITUBONDO</h1>
                <p class="welcome-splash-message">
                <strong>Lentera Karya Situbondo</strong> dengan bangga mempersembahkan sebuah inovasi digital: 
                    sebuah platform terpadu yang dirancang untuk mentransformasi pendataan, penyaluran, 
                    dan monitoring program bantuan pemerintah. Aplikasi ini kami ciptakan untuk mendorong efisiensi, akurasi, 
                    dan transparansi dalam pengelolaan bantuan, guna mempercepat penyerapan dan meningkatkan akuntabilitas 
                    bagi seluruh masyarakat dan stakeholder di wilayah Kabupaten Situbondo.
                </p>
                <div class="welcome-splash-countdown" id="splashCountdown">
                    Membuka aplikasi dalam <span id="countdownTimer">5</span> detik...
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu Button -->
        <button class="mobile-menu-btn" id="mobileMenuBtn">
            <i class="fas fa-bars"></i>
        </button>
        
        <!-- Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>
        
        <div class="app-container animate-fadeIn">
            <div class="app-header">
                <div class="app-logo">
                    <i class="fas fa-cow"></i>
                </div>
                <h1 class="app-title">BARJAS</h1>
                <p class="app-subtitle">Bantuan Rehabilitasi Kandang dan Jalan Usaha Tani</p>
                <p class="app-subtitle">Dinas Peternakan dan Perikanan Kabupaten Situbondo</p>
                <div class="watermark">v2.1.0</div>
            </div>
            
            <div class="row g-0">
                <!-- Sidebar Navigation -->
                <div class="col-md-3 col-lg-2 p-4 bg-light" id="sidebar">
                    <ul class="nav nav-pills flex-column mb-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link active" data-bs-target="dashboard">
                                <span class="feature-icon"><i class="fas fa-home"></i></span>
                                Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-target="inputData">
                                <span class="feature-icon"><i class="fas fa-pen-to-square"></i></span>
                                Input Data Bantuan
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-target="dataTable">
                                <span class="feature-icon"><i class="fas fa-table"></i></span>
                                Tabel Data
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-target="links">
                                <span class="feature-icon"><i class="fas fa-link"></i></span>
                                Link Google Drive
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-target="maps">
                                <span class="feature-icon"><i class="fas fa-map-marked-alt"></i></span>
                                Peta Lokasi
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-target="reports">
                                <span class="feature-icon"><i class="fas fa-chart-bar"></i></span>
                                Laporan & Statistik
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-target="settings">
                                <span class="feature-icon"><i class="fas fa-cog"></i></span>
                                Pengaturan
                            </a>
                        </li>
                        <li class="nav-item mt-4">
                            <a href="#" class="nav-link text-danger" id="logoutBtn">
                                <span class="feature-icon"><i class="fas fa-sign-out-alt"></i></span>
                                Keluar
                            </a>
                        </li>
                    </ul>
                    
                    <div class="developer-info mt-4">
                        <h6 class="mb-3">Developer Information</h6>
                        <div class="developer-contact">
                            <p><i class="fab fa-whatsapp me-2"></i> <a href="https://wa.me/628123456789" target="_blank">+62 812-3456-7890</a></p>
                            <p><i class="fas fa-envelope me-2"></i> <a href="mailto:developer@example.com">developer@example.com</a></p>
                        </div>
                    </div>
                </div>
                
                <!-- Main Content -->
                <div class="col-md-9 col-lg-10 p-5">
                    <!-- Dashboard Section -->
                    <div class="content-section" id="dashboard">
                        <h3 class="section-title">Dashboard</h3>
                        
                        <div class="row">
                            <div class="col-md-3">
                                <div class="stats-box">
                                    <div class="stats-icon">
                                        <i class="fas fa-users fa-2x text-primary"></i>
                                    </div>
                                    <div class="stats-number" id="totalPenerima">0</div>
                                    <div class="stats-label">Total Penerima Bantuan</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-box">
                                    <div class="stats-icon">
                                        <i class="fas fa-cow fa-2x text-success"></i>
                                    </div>
                                    <div class="stats-number" id="totalPeternak">0</div>
                                    <div class="stats-label">Peternak</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-box">
                                    <div class="stats-icon">
                                        <i class="fas fa-fish fa-2x text-info"></i>
                                    </div>
                                    <div class="stats-number" id="totalPerikanan">0</div>
                                    <div class="stats-label">Perikanan</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-box">
                                    <div class="stats-icon">
                                        <i class="fas fa-map-marker-alt fa-2x text-warning"></i>
                                    </div>
                                    <div class="stats-number" id="totalKecamatan">0</div>
                                    <div class="stats-label">Kecamatan</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="fas fa-chart-pie me-2"></i> Distribusi Bantuan per Kecamatan
                                    </div>
                                    <div class="card-body">
                                        <canvas id="kecamatanChart" height="250"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="fas fa-chart-bar me-2"></i> Jenis Bantuan
                                    </div>
                                    <div class="card-body">
                                        <canvas id="jenisBantuanChart" height="250"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="fas fa-history me-2"></i> Data Terbaru
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-hover data-table">
                                                <thead>
                                                    <tr>
                                                        <th>No</th>
                                                        <th>Nama Penerima</th>
                                                        <th>Alamat</th>
                                                        <th>Jenis Bantuan</th>
                                                        <th>Tanggal Input</th>
                                                        <th>Aksi</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="recentDataTable">
                                                    <!-- Data akan diisi oleh JavaScript -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Input Data Section -->
                    <div class="content-section d-none" id="inputData">
                        <h3 class="section-title">Input Data Bantuan</h3>
                        
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i> Isi formulir di bawah ini untuk menambahkan data penerima bantuan baru.
                        </div>
                        
                        <form id="inputForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card mb-4">
                                        <div class="card-header">Data Penerima</div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-user"></i> Nama Penerima</label>
                                                <input type="text" class="form-control" id="namaPenerima" required>
                                                <div class="error-message" id="namaPenerimaError">Nama penerima harus diisi</div>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-id-card"></i> NIK</label>
                                                <input type="text" class="form-control" id="nik" required maxlength="16">
                                                <div class="error-message" id="nikError">NIK harus 16 digit angka</div>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-phone"></i> Nomor WhatsApp</label>
                                                <input type="text" class="form-control" id="noWhatsApp" required>
                                                <div class="error-message" id="noWhatsAppError">Nomor WhatsApp harus diisi</div>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-map-marker-alt"></i> Alamat Lengkap</label>
                                                <textarea class="form-control" id="alamatLengkap" rows="3" required></textarea>
                                                <div class="error-message" id="alamatLengkapError">Alamat lengkap harus diisi</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="card mb-4">
                                        <div class="card-header">Detail Bantuan</div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-calendar-alt"></i> Tahun Anggaran</label>
                                                <select class="form-select" id="tahunAnggaran" required>
                                                    <option value="">Pilih Tahun Anggaran</option>
                                                    <!-- Opsi tahun akan diisi oleh JavaScript -->
                                                </select>
                                                <div class="error-message" id="tahunAnggaranError">Tahun anggaran harus dipilih</div>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-tag"></i> Jenis Bantuan</label>
                                                <select class="form-select" id="jenisBantuan" required>
                                                    <option value="">Pilih Jenis Bantuan</option>
                                                    <option value="Peternak">Peternak</option>
                                                    <option value="Perikanan">Perikanan</option>
                                                </select>
                                                <div class="error-message" id="jenisBantuanError">Jenis bantuan harus dipilih</div>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-info-circle"></i> Nama Kegiatan</label>
                                                <input type="text" class="form-control" id="namaKegiatan" required>
                                                <div class="error-message" id="namaKegiatanError">Nama kegiatan harus diisi</div>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-box"></i> Volume</label>
                                                <input type="text" class="form-control" id="volume" required>
                                                <div class="error-message" id="volumeError">Volume harus diisi</div>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-money-bill-wave"></i> Nilai Bantuan (Rp)</label>
                                                <input type="text" class="form-control" id="nilaiBantuan" required>
                                                <div class="error-message" id="nilaiBantuanError">Nilai bantuan harus diisi</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card mb-4">
                                        <div class="card-header">Lokasi</div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-map-marked-alt"></i> Kecamatan</label>
                                                <select class="form-select" id="kecamatan" required>
                                                    <option value="">Pilih Kecamatan</option>
                                                    <!-- Opsi kecamatan akan diisi oleh JavaScript -->
                                                </select>
                                                <div class="error-message" id="kecamatanError">Kecamatan harus dipilih</div>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-map-pin"></i> Desa</label>
                                                <select class="form-select" id="desa" required>
                                                    <option value="">Pilih Desa</option>
                                                    <!-- Opsi desa akan diisi oleh JavaScript -->
                                                </select>
                                                <div class="error-message" id="desaError">Desa harus dipilih</div>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-map-marker-alt"></i> Titik Koordinat</label>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" id="koordinat" placeholder="Klik tombol GPS untuk mendapatkan koordinat" readonly>
                                                    <button class="btn btn-outline-primary" type="button" id="getLocationBtn">
                                                        <i class="fas fa-crosshairs"></i> Gunakan GPS
                                                    </button>
                                                </div>
                                                <div class="error-message" id="koordinatError">Koordinat harus diisi</div>
                                                <div class="form-text">Pastikan GPS aktif untuk mendapatkan koordinat yang akurat</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="card mb-4">
                                        <div class="card-header">Dokumentasi</div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-camera"></i> Foto Penerima</label>
                                                <input type="file" class="form-control" id="fotoPenerima" accept="image/*">
                                                <div class="form-text">Unggah foto penerima bantuan (opsional)</div>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-image"></i> Foto Lokasi</label>
                                                <input type="file" class="form-control" id="fotoLokasi" accept="image/*">
                                                <div class="form-text">Unggah foto lokasi penerimaan bantuan (opsional)</div>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label"><i class="fas fa-file-image"></i> Dokumentasi Lainnya</label>
                                                <input type="file" class="form-control" id="dokumentasiLain" accept="image/*" multiple>
                                                <div class="form-text">Unggah dokumentasi lainnya (opsional, multiple)</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-flex justify-content-between mt-4">
                                <button type="reset" class="btn btn-secondary">
                                    <i class="fas fa-undo me-2"></i> Reset Form
                                </button>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save me-2"></i> Simpan Data
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Tabel Data Section -->
                    <div class="content-section d-none" id="dataTable">
                        <h3 class="section-title">Tabel Data Penerima Bantuan</h3>
                        
                        <div class="filter-section mb-4">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <label class="form-label">Cari Data</label>
                                        <input type="text" class="form-control" id="searchInput" placeholder="Cari...">
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <label class="form-label">Kecamatan</label>
                                        <select class="form-select" id="filterKecamatan">
                                            <option value="">Semua Kecamatan</option>
                                            <!-- Opsi kecamatan akan diisi oleh JavaScript -->
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <label class="form-label">Jenis Bantuan</label>
                                        <select class="form-select" id="filterJenisBantuan">
                                            <option value="">Semua Jenis</option>
                                            <option value="Peternak">Peternak</option>
                                            <option value="Perikanan">Perikanan</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <label class="form-label">Tahun Anggaran</label>
                                        <select class="form-select" id="filterTahun">
                                            <option value="">Semua Tahun</option>
                                            <!-- Opsi tahun akan diisi oleh JavaScript -->
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="control-panel">
                            <div class="control-title">Kelola Data</div>
                            <div class="d-flex flex-wrap gap-2">
                                <button class="btn btn-success" id="exportExcelBtn">
                                    <i class="fas fa-file-excel me-2"></i> Export Excel
                                </button>
                                <button class="btn btn-danger" id="exportPdfBtn">
                                    <i class="fas fa-file-pdf me-2"></i> Export PDF
                                </button>
                                <button class="btn btn-warning" id="printTableBtn">
                                    <i class="fas fa-print me-2"></i> Cetak Tabel
                                </button>
                                <button class="btn btn-info" id="viewLinksBtn">
                                    <i class="fas fa-link me-2"></i> Lihat Link
                                </button>
                                <button class="btn btn-secondary" id="resetFilterBtn">
                                    <i class="fas fa-filter me-2"></i> Reset Filter
                                </button>
                            </div>
                        </div>
                        
                        <div class="table-responsive mt-4">
                            <table class="table table-striped table-bordered table-hover data-table" id="mainDataTable">
                                <thead>
                                    <tr>
                                        <th>No</th>
                                        <th>Nama Penerima</th>
                                        <th>NIK</th>
                                        <th>No WhatsApp</th>
                                        <th>Alamat</th>
                                        <th>Kecamatan</th>
                                        <th>Desa</th>
                                        <th>Jenis Bantuan</th>
                                        <th>Tahun</th>
                                        <th>Koordinat</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="dataTableBody">
                                    <!-- Data akan diisi oleh JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="d-flex justify-content-between align-items-center mt-4">
                            <div class="dataTables_info" id="tableInfo">Menampilkan 0 dari 0 data</div>
                            <nav>
                                <ul class="pagination" id="pagination">
                                    <!-- Pagination akan diisi oleh JavaScript -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                    
                    <!-- Link Google Drive Section -->
                    <div class="content-section d-none" id="links">
                        <h3 class="section-title">Kelola Link Google Drive</h3>
                        
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i> Tambahkan link Google Drive untuk setiap kecamatan. Link ini akan digunakan untuk menyimpan dokumentasi.
                        </div>
                        
                        <div class="link-section">
                            <h5 class="link-section-title">Tambah Link Baru</h5>
                            <form id="linkForm">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3 link-input-group">
                                            <label class="form-label">Kecamatan</label>
                                            <select class="form-select" id="linkKecamatan" required>
                                                <option value="">Pilih Kecamatan</option>
                                                <!-- Opsi kecamatan akan diisi oleh JavaScript -->
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3 link-input-group">
                                            <label class="form-label">Link Google Drive</label>
                                            <input type="url" class="form-control" id="linkUrl" placeholder="https://drive.google.com/..." required>
                                        </div>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-plus me-2"></i> Tambah Link
                                </button>
                            </form>
                        </div>
                        
                        <div class="card mt-4">
                            <div class="card-header">Daftar Link Google Drive</div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>Kecamatan</th>
                                                <th>Link Google Drive</th>
                                                <th>Aksi</th>
                                            </tr>
                                        </thead>
                                        <tbody id="linksTableBody">
                                            <!-- Data akan diisi oleh JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Peta Lokasi Section -->
                    <div class="content-section d-none" id="maps">
                        <h3 class="section-title">Peta Lokasi Penerima Bantuan</h3>
                        
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i> Peta ini menampilkan lokasi penerima bantuan berdasarkan koordinat GPS.
                        </div>
                        
                        <div class="filter-section mb-4">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label class="form-label">Kecamatan</label>
                                        <select class="form-select" id="mapFilterKecamatan">
                                            <option value="">Semua Kecamatan</option>
                                            <!-- Opsi kecamatan akan diisi oleh JavaScript -->
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label class="form-label">Jenis Bantuan</label>
                                        <select class="form-select" id="mapFilterJenisBantuan">
                                            <option value="">Semua Jenis</option>
                                            <option value="Peternak">Peternak</option>
                                            <option value="Perikanan">Perikanan</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label class="form-label">Tahun Anggaran</label>
                                        <select class="form-select" id="mapFilterTahun">
                                            <option value="">Semua Tahun</option>
                                            <!-- Opsi tahun akan diisi oleh JavaScript -->
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-body p-0">
                                <div id="map" style="height: 500px; width: 100%; border-radius: 8px;"></div>
                            </div>
                        </div>
                        
                        <div class="card mt-4">
                            <div class="card-header">Legenda Peta</div>
                            <div class="card-body">
                                <div class="d-flex flex-wrap gap-3">
                                    <div class="d-flex align-items-center">
                                        <div style="width: 20px; height: 20px; background-color: #0d47a1; border-radius: 50%; margin-right: 8px;"></div>
                                        <span>Peternak</span>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <div style="width: 20px; height: 20px; background-color: #00695c; border-radius: 50%; margin-right: 8px;"></div>
                                        <span>Perikanan</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Laporan & Statistik Section -->
                    <div class="content-section d-none" id="reports">
                        <h3 class="section-title">Laporan & Statistik</h3>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-header">Filter Laporan</div>
                                    <div class="card-body">
                                        <form id="reportForm">
                                            <div class="mb-3">
                                                <label class="form-label">Tahun Anggaran</label>
                                                <select class="form-select" id="reportTahun" required>
                                                    <option value="">Pilih Tahun</option>
                                                    <!-- Opsi tahun akan diisi oleh JavaScript -->
                                                </select>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label">Jenis Bantuan</label>
                                                <select class="form-select" id="reportJenisBantuan">
                                                    <option value="">Semua Jenis</option>
                                                    <option value="Peternak">Peternak</option>
                                                    <option value="Perikanan">Perikanan</option>
                                                </select>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label">Kecamatan</label>
                                                <select class="form-select" id="reportKecamatan">
                                                    <option value="">Semua Kecamatan</option>
                                                    <!-- Opsi kecamatan akan diisi oleh JavaScript -->
                                                </select>
                                            </div>
                                            
                                            <button type="submit" class="btn btn-primary w-100">
                                                <i class="fas fa-chart-bar me-2"></i> Generate Laporan
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-header">Ekspor Laporan</div>
                                    <div class="card-body">
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-success" id="exportReportExcel">
                                                <i class="fas fa-file-excel me-2"></i> Ekspor ke Excel
                                            </button>
                                            <button class="btn btn-danger" id="exportReportPdf">
                                                <i class="fas fa-file-pdf me-2"></i> Ekspor ke PDF
                                            </button>
                                            <button class="btn btn-warning" id="printReport">
                                                <i class="fas fa-print me-2"></i> Cetak Laporan
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">Statistik Bantuan per Kecamatan</div>
                            <div class="card-body">
                                <canvas id="reportChart" height="300"></canvas>
                            </div>
                        </div>
                        
                        <div class="card mt-4">
                            <div class="card-header">Detail Laporan</div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-bordered table-hover">
                                        <thead>
                                            <tr>
                                                <th>Kecamatan</th>
                                                <th>Jumlah Penerima</th>
                                                <th>Total Nilai Bantuan (Rp)</th>
                                                <th>Rata-rata per Penerima (Rp)</th>
                                            </tr>
                                        </thead>
                                        <tbody id="reportTableBody">
                                            <!-- Data akan diisi oleh JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pengaturan Section -->
                    <div class="content-section d-none" id="settings">
                        <h3 class="section-title">Pengaturan Aplikasi</h3>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-header">Pengaturan Umum</div>
                                    <div class="card-body">
                                        <form id="generalSettingsForm">
                                            <div class="mb-3">
                                                <label class="form-label">Nama Aplikasi</label>
                                                <input type="text" class="form-control" value="BARJAS" disabled>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label">Versi Aplikasi</label>
                                                <input type="text" class="form-control" value="v2.1.0" disabled>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label">Jumlah Data Tersimpan</label>
                                                <input type="text" class="form-control" id="dataCountSetting" disabled>
                                            </div>
                                            
                                            <div class="mb-3 form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="notifikasiSwitch" checked>
                                                <label class="form-check-label" for="notifikasiSwitch">Aktifkan Notifikasi</label>
                                            </div>
                                            
                                            <div class="mb-3 form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="autoSaveSwitch" checked>
                                                <label class="form-check-label" for="autoSaveSwitch">Auto Save Data</label>
                                            </div>
                                            
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-save me-2"></i> Simpan Pengaturan
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-header">Backup & Restore Data</div>
                                    <div class="card-body">
                                        <div class="d-grid gap-2 mb-3">
                                            <button class="btn btn-success" id="backupDataBtn">
                                                <i class="fas fa-download me-2"></i> Backup Data
                                            </button>
                                            <button class="btn btn-warning" id="restoreDataBtn">
                                                <i class="fas fa-upload me-2"></i> Restore Data
                                            </button>
                                            <input type="file" id="restoreFileInput" class="d-none" accept=".json">
                                        </div>
                                        
                                        <div class="alert alert-info">
                                            <i class="fas fa-info-circle me-2"></i> Backup data akan mengunduh file JSON yang berisi semua data aplikasi.
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-header">Reset Aplikasi</div>
                                    <div class="card-body">
                                        <div class="alert alert-warning">
                                            <i class="fas fa-exclamation-triangle me-2"></i> Tindakan ini akan menghapus semua data dan mengembalikan aplikasi ke pengaturan awal.
                                        </div>
                                        
                                        <button class="btn btn-danger w-100" id="resetAppBtn" data-bs-toggle="modal" data-bs-target="#resetConfirmationModal">
                                            <i class="fas fa-trash-alt me-2"></i> Reset Aplikasi
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="copyright">
                &copy; 2023 Dinas Peternakan dan Perikanan Kabupaten Situbondo. All Rights Reserved.
            </div>
        </div>
        
        <!-- Floating Action Button -->
        <div class="floating-action-btn" id="scrollToTopBtn">
            <i class="fas fa-arrow-up"></i>
        </div>
        
        <!-- Notification Toast -->
        <div class="toast notification-toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="true" data-bs-delay="5000">
            <div class="toast-header">
                <strong class="me-auto" id="toastTitle">Notification</strong>
                <small id="toastTime">Just now</small>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body" id="toastMessage">
                <!-- Message will be inserted here -->
            </div>
        </div>
        
        <!-- Reset Confirmation Modal -->
        <div class="modal fade" id="resetConfirmationModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Konfirmasi Reset Aplikasi</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="alert alert-danger">
                            <i class="fas fa-exclamation-triangle me-2"></i> Anda yakin ingin mereset aplikasi? Semua data akan dihapus dan tidak dapat dikembalikan.
                        </div>
                        <p>Masukkan kata sandi reset untuk melanjutkan:</p>
                        <input type="password" class="form-control" id="resetPassword" placeholder="Kata sandi reset">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                        <button type="button" class="btn btn-danger" id="confirmResetBtn">Reset Aplikasi</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- View Links Modal -->
        <div class="modal fade links-modal" id="viewLinksModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Link Google Drive per Kecamatan</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="viewLinksModalBody">
                        <!-- Content will be inserted by JavaScript -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Print Header (Hidden by default) -->
        <div class="print-header d-none">
            <h2 class="print-title">LAPORAN DATA PENERIMA BANTUAN</h2>
            <p class="print-subtitle">Dinas Peternakan dan Perikanan Kabupaten Situbondo</p>
            <p class="print-date" id="printDate"></p>
        </div>
        
        <!-- Security Code (Hidden) -->
        <div class="security-code">BARJAS2023SITUBONDO</div>
        
        <!-- Scripts -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/chart.js/3.9.1/chart.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
        <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
        
        <script>
        // ==============================
        // KONFIGURASI AWAL APLIKASI
        // ==============================
        
        // Daftar kecamatan dan desa di Kabupaten Situbondo
        const kecamatanList = [
            "Arjasa", "Banyuglugur", "Banyuputih", "Besuki", "Bungatan", 
            "Jangkar", "Jatibanteng", "Kapongan", "Kendit", "Mangaran", 
            "Mlandingan", "Panarukan", "Panji", "Situbondo", "Suboh", 
            "Sumbermalang"
        ];
        
        // Daftar desa per kecamatan (contoh)
        const desaList = {
            "Arjasa": ["Arjasa", "Biting", "Candijati", "Darsono", "Jatian", "Kamal", "Kayumas"],
            "Banyuglugur": ["Banyuglugur", "Kalianget", "Kalisari", "Sumberanyar", "Tepos"],
            "Banyuputih": ["Banyuputih", "Sumberejo", "Wringinanom", "Sumberwaru", "Patemon"],
            "Besuki": ["Besuki", "Blimbing", "Bloro", "Demung", "Jambesari", "Jatirejo"],
            "Bungatan": ["Bungatan", "Kertosari", "Mojosari", "Sumberkencono", "Taman"],
            "Jangkar": ["Jangkar", "Juglangan", "Kumbangsari", "Pategalan", "Tamansari"],
            "Jatibanteng": ["Jatibanteng", "Curahsuri", "Kaliputih", "Sanen", "Sumberanyar"],
            "Kapongan": ["Kapongan", "Kedunglo", "Kendit", "Peleyan", "Wonokerto"],
            "Kendit": ["Kendit", "Balung", "Klatakan", "Kukusan", "Tambak Ukir"],
            "Mangaran": ["Mangaran", "Gadingan", "Klabangan", "Klampokan", "Tambakrejo"],
            "Mlandingan": ["Mlandingan", "Curahkalak", "Kesambirampak", "Sumberanyar", "Wringinanom"],
            "Panarukan": ["Panarukan", "Gunung Malang", "Kertosari", "Klabang", "Klampokan"],
            "Panji": ["Panji", "Battal", "Curah Jeru", "Mangaran", "Sumberkolak"],
            "Situbondo": ["Situbondo", "Jawa", "Kayu Putih", "Patokan", "Sumberejo"],
            "Suboh": ["Suboh", "Banyuanyar", "Gunung Putri", "Kedungrejo", "Mojodungkul"],
            "Sumbermalang": ["Sumbermalang", "Kalitapen", "Kembang", "Kesamben", "Wonoasri"]
        };
        
        // Konfigurasi aplikasi
        const appConfig = {
            appName: "BARJAS",
            appVersion: "2.1.0",
            developer: "Dinas Peternakan dan Perikanan Kabupaten Situbondo",
            securityCode: "ANEKAMARKET.1999", // Kode keamanan default
            maxLoginAttempts: 5,
            loginBlockTime: 60, // dalam detik
            dataKey: "barjas_data",
            linksKey: "barjas_links",
            settingsKey: "barjas_settings"
        };
        
        // Inisialisasi variabel global
        let appData = {
            penerima: [],
            links: [],
            settings: {
                notifications: true,
                autoSave: true
            }
        };
        
        let currentPage = 1;
        const itemsPerPage = 10;
        let filteredData = [];
        let loginAttempts = 0;
        let isBlocked = false;
        let map;
        let markers = [];
        
        // ==============================
        // INISIALISASI APLIKASI
        // ==============================
        
        document.addEventListener('DOMContentLoaded', function() {
            // Inisialisasi komponen UI
            initUI();
            
            // Tampilkan splash screen
            showSplashScreen();
            
            // Setup event listeners
            setupEventListeners();
            
            // Load data dari localStorage
            loadAppData();
            
            // Inisialisasi peta
            initMap();
            
            // Setup particles.js untuk latar belakang login
            setupParticles();
        });
        
        function initUI() {
            // Isi dropdown tahun anggaran (5 tahun terakhir dan 2 tahun ke depan)
            const tahunAnggaranDropdown = document.getElementById('tahunAnggaran');
            const tahunSekarang = new Date().getFullYear();
            
            for (let i = tahunSekarang - 5; i <= tahunSekarang + 2; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                tahunAnggaranDropdown.appendChild(option);
            }
            
            // Isi dropdown kecamatan
            fillKecamatanDropdowns();
            
            // Inisialisasi tooltip Bootstrap
            const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
            
            // Inisialisasi toast
            const toastEl = document.querySelector('.toast');
            const toast = new bootstrap.Toast(toastEl);
        }
        
        function fillKecamatanDropdowns() {
            // Dapatkan semua dropdown kecamatan
            const kecamatanDropdowns = [
                document.getElementById('kecamatan'),
                document.getElementById('filterKecamatan'),
                document.getElementById('mapFilterKecamatan'),
                document.getElementById('reportKecamatan'),
                document.getElementById('linkKecamatan')
            ];
            
            // Isi setiap dropdown dengan daftar kecamatan
            kecamatanDropdowns.forEach(dropdown => {
                if (dropdown) {
                    // Kosongkan dropdown kecuali opsi pertama
                    while (dropdown.options.length > 1) {
                        dropdown.remove(1);
                    }
                    
                    // Tambahkan opsi kecamatan
                    kecamatanList.forEach(kecamatan => {
                        const option = document.createElement('option');
                        option.value = kecamatan;
                        option.textContent = kecamatan;
                        dropdown.appendChild(option);
                    });
                }
            });
        }
        
        function setupEventListeners() {
            // Navigasi menu
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = this.getAttribute('data-bs-target');
                    showSection(target);
                    
                    // Tandai menu aktif
                    document.querySelectorAll('.nav-link').forEach(item => {
                        item.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // Di perangkat mobile, tutup sidebar setelah memilih menu
                    if (window.innerWidth < 992) {
                        document.getElementById('sidebar').classList.remove('mobile-show');
                        document.getElementById('sidebarOverlay').classList.remove('mobile-show');
                    }
                });
            });
            
            // Tombol menu mobile
            document.getElementById('mobileMenuBtn').addEventListener('click', function() {
                document.getElementById('sidebar').classList.toggle('mobile-show');
                document.getElementById('sidebarOverlay').classList.toggle('mobile-show');
            });
            
            // Overlay sidebar mobile
            document.getElementById('sidebarOverlay').addEventListener('click', function() {
                document.getElementById('sidebar').classList.remove('mobile-show');
                this.classList.remove('mobile-show');
            });
            
            // Form input data
            document.getElementById('inputForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveData();
            });
            
            // Form filter data
            document.getElementById('searchInput').addEventListener('input', filterData);
            document.getElementById('filterKecamatan').addEventListener('change', filterData);
            document.getElementById('filterJenisBantuan').addEventListener('change', filterData);
            document.getElementById('filterTahun').addEventListener('change', filterData);
            
            // Form filter peta
            document.getElementById('mapFilterKecamatan').addEventListener('change', updateMap);
            document.getElementById('mapFilterJenisBantuan').addEventListener('change', updateMap);
            document.getElementById('mapFilterTahun').addEventListener('change', updateMap);
            
            // Form laporan
            document.getElementById('reportForm').addEventListener('submit', function(e) {
                e.preventDefault();
                generateReport();
            });
            
            // Tombol ekspor data
            document.getElementById('exportExcelBtn').addEventListener('click', exportToExcel);
            document.getElementById('exportPdfBtn').addEventListener('click', exportToPdf);
            document.getElementById('printTableBtn').addEventListener('click', printTable);
            
            // Tombol reset filter
            document.getElementById('resetFilterBtn').addEventListener('click', resetFilter);
            
            // Tombol lihat link
            document.getElementById('viewLinksBtn').addEventListener('click', viewAllLinks);
            
            // Form link Google Drive
            document.getElementById('linkForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveLink();
            });
            
            // Tombol backup dan restore data
            document.getElementById('backupDataBtn').addEventListener('click', backupData);
            document.getElementById('restoreDataBtn').addEventListener('click', function() {
                document.getElementById('restoreFileInput').click();
            });
            document.getElementById('restoreFileInput').addEventListener('change', restoreData);
            
            // Tombol reset aplikasi
            document.getElementById('resetAppBtn').addEventListener('click', function() {
                // Modal akan terbuka secara otomatis dengan data-bs-target
            });
            document.getElementById('confirmResetBtn').addEventListener('click', resetApp);
            
            // Tombol scroll to top
            document.getElementById('scrollToTopBtn').addEventListener('click', function() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            
            // Toggle password visibility
            document.querySelector('.toggle-password').addEventListener('click', function() {
                const passwordInput = document.getElementById('securityCode');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    passwordInput.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });
            
            // Form login
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                login();
            });
            
            // Pilih kecamatan untuk mengisi dropdown desa
            document.getElementById('kecamatan').addEventListener('change', function() {
                fillDesaDropdown(this.value);
            });
            
            // Tombol GPS untuk mendapatkan lokasi
            document.getElementById('getLocationBtn').addEventListener('click', getCurrentLocation);
            
            // Tutup splash screen
            document.getElementById('closeSplash').addEventListener('click', function() {
                document.getElementById('welcomeSplash').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('welcomeSplash').style.display = 'none';
                    showLoginModal();
                }, 500);
            });
            
            // Event listener untuk logout
            document.getElementById('logoutBtn').addEventListener('click', function(e) {
                e.preventDefault();
                logout();
            });
        }
        
        function showSplashScreen() {
            let countdown = 5;
            const countdownElement = document.getElementById('countdownTimer');
            const countdownInterval = setInterval(() => {
                countdown--;
                countdownElement.textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(countdownInterval);
                    document.getElementById('welcomeSplash').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('welcomeSplash').style.display = 'none';
                        showLoginModal();
                    }, 500);
                }
            }, 1000);
        }
        
        function showLoginModal() {
            const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
            loginModal.show();
            
            // Reset status login
            loginAttempts = 0;
            isBlocked = false;
            updateLoginUI();
        }
        
        function login() {
            if (isBlocked) return;
            
            const securityCode = document.getElementById('securityCode').value;
            const correctCode = document.querySelector('.security-code').textContent;
            
            if (securityCode === correctCode) {
                // Login berhasil
                showNotification('Login Berhasil', 'Selamat datang di aplikasi BARJAS', 'success');
                
                // Sembunyikan modal login
                const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
                loginModal.hide();
                
                // Tampilkan aplikasi
                document.querySelector('.app-container').style.display = 'block';
            } else {
                // Login gagal
                loginAttempts++;
                
                if (loginAttempts >= appConfig.maxLoginAttempts) {
                    // Blokir login sementara
                    isBlocked = true;
                    let blockTime = appConfig.loginBlockTime;
                    
                    showNotification('Login Diblokir', `Terlalu banyak percobaan gagal. Coba lagi dalam ${blockTime} detik.`, 'error');
                    
                    const countdownInterval = setInterval(() => {
                        blockTime--;
                        document.getElementById('countdown').textContent = blockTime;
                        
                        if (blockTime <= 0) {
                            clearInterval(countdownInterval);
                            isBlocked = false;
                            loginAttempts = 0;
                            updateLoginUI();
                        }
                    }, 1000);
                } else {
                    showNotification('Login Gagal', `Kode keamanan salah. Percobaan ${loginAttempts} dari ${appConfig.maxLoginAttempts}`, 'error');
                }
                
                updateLoginUI();
            }
        }
        
        function updateLoginUI() {
            const loginButton = document.getElementById('loginButton');
            const loginSpinner = document.getElementById('loginSpinner');
            const attemptsCount = document.getElementById('attemptsCount');
            const blockedMessage = document.getElementById('blockedMessage');
            
            if (isBlocked) {
                loginButton.disabled = true;
                blockedMessage.classList.remove('d-none');
                attemptsCount.classList.add('d-none');
            } else {
                loginButton.disabled = false;
                blockedMessage.classList.add('d-none');
                
                if (loginAttempts > 0) {
                    attemptsCount.textContent = `Percobaan ${loginAttempts} dari ${appConfig.maxLoginAttempts}`;
                    attemptsCount.classList.remove('d-none');
                } else {
                    attemptsCount.classList.add('d-none');
                }
            }
        }
        
        function logout() {
            if (confirm('Apakah Anda yakin ingin keluar dari aplikasi?')) {
                document.querySelector('.app-container').style.display = 'none';
                showLoginModal();
            }
        }
        
        function showSection(sectionId) {
            // Sembunyikan semua section
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.add('d-none');
            });
            
            // Tampilkan section yang dipilih
            document.getElementById(sectionId).classList.remove('d-none');
            
            // Jika section adalah dashboard, perbarui statistik
            if (sectionId === 'dashboard') {
                updateDashboard();
            }
            
            // Jika section adalah tabel data, perbarui tabel
            if (sectionId === 'dataTable') {
                filterData();
            }
            
            // Jika section adalah peta, perbarui peta
            if (sectionId === 'maps') {
                updateMap();
            }
        }
        
        function loadAppData() {
            // Load data dari localStorage
            const savedData = localStorage.getItem(appConfig.dataKey);
            const savedLinks = localStorage.getItem(appConfig.linksKey);
            const savedSettings = localStorage.getItem(appConfig.settingsKey);
            
            if (savedData) {
                appData.penerima = JSON.parse(savedData);
            }
            
            if (savedLinks) {
                appData.links = JSON.parse(savedLinks);
            }
            
            if (savedSettings) {
                appData.settings = JSON.parse(savedSettings);
            }
            
            // Perbarui UI dengan data yang dimuat
            updateDashboard();
            updateLinksTable();
        }
        
        function saveAppData() {
            // Simpan data ke localStorage
            localStorage.setItem(appConfig.dataKey, JSON.stringify(appData.penerima));
            localStorage.setItem(appConfig.linksKey, JSON.stringify(appData.links));
            localStorage.setItem(appConfig.settingsKey, JSON.stringify(appData.settings));
        }
        
        function saveData() {
            // Validasi form
            if (!validateForm()) {
                showNotification('Error', 'Harap isi semua field yang wajib diisi', 'error');
                return;
            }
            
            // Ambil nilai dari form
            const newData = {
                id: Date.now(), // ID unik berdasarkan timestamp
                namaPenerima: document.getElementById('namaPenerima').value,
                nik: document.getElementById('nik').value,
                noWhatsApp: document.getElementById('noWhatsApp').value,
                alamatLengkap: document.getElementById('alamatLengkap').value,
                tahunAnggaran: document.getElementById('tahunAnggaran').value,
                jenisBantuan: document.getElementById('jenisBantuan').value,
                namaKegiatan: document.getElementById('namaKegiatan').value,
                volume: document.getElementById('volume').value,
                nilaiBantuan: document.getElementById('nilaiBantuan').value,
                kecamatan: document.getElementById('kecamatan').value,
                desa: document.getElementById('desa').value,
                koordinat: document.getElementById('koordinat').value,
                tanggalInput: new Date().toISOString()
            };
            
            // Tambahkan data baru ke array
            appData.penerima.push(newData);
            
            // Simpan ke localStorage
            saveAppData();
            
            // Reset form
            document.getElementById('inputForm').reset();
            
            // Perbarui dashboard dan tabel
            updateDashboard();
            
            // Tampilkan notifikasi
            showNotification('Sukses', 'Data berhasil disimpan', 'success');
        }
        
        function validateForm() {
            let isValid = true;
            
            // Validasi field wajib
            const requiredFields = [
                'namaPenerima', 'nik', 'noWhatsApp', 'alamatLengkap', 
                'tahunAnggaran', 'jenisBantuan', 'namaKegiatan', 
                'volume', 'nilaiBantuan', 'kecamatan', 'desa', 'koordinat'
            ];
            
            requiredFields.forEach(field => {
                const element = document.getElementById(field);
                const errorElement = document.getElementById(field + 'Error');
                
                if (!element.value.trim()) {
                    element.classList.add('input-error');
                    errorElement.style.display = 'block';
                    isValid = false;
                } else {
                    element.classList.remove('input-error');
                    errorElement.style.display = 'none';
                }
            });
            
            // Validasi khusus NIK (harus 16 digit angka)
            const nik = document.getElementById('nik').value;
            if (nik && !/^\d{16}$/.test(nik)) {
                document.getElementById('nik').classList.add('input-error');
                document.getElementById('nikError').style.display = 'block';
                isValid = false;
            }
            
            return isValid;
        }
        
        function fillDesaDropdown(kecamatan) {
            const desaDropdown = document.getElementById('desa');
            
            // Kosongkan dropdown kecuali opsi pertama
            while (desaDropdown.options.length > 1) {
                desaDropdown.remove(1);
            }
            
            // Jika kecamatan dipilih, isi dropdown desa
            if (kecamatan && desaList[kecamatan]) {
                desaList[kecamatan].forEach(desa => {
                    const option = document.createElement('option');
                    option.value = desa;
                    option.textContent = desa;
                    desaDropdown.appendChild(option);
                });
            }
        }
        
        function getCurrentLocation() {
            if (!navigator.geolocation) {
                showNotification('Error', 'Geolocation tidak didukung oleh browser Anda', 'error');
                return;
            }
            
            const button = document.getElementById('getLocationBtn');
            const originalText = button.innerHTML;
            
            // Tampilkan spinner
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Mendapatkan lokasi...';
            button.disabled = true;
            
            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;
                    
                    // Isi nilai koordinat
                    document.getElementById('koordinat').value = `${latitude}, ${longitude}`;
                    
                    // Kembalikan tampilan tombol
                    button.innerHTML = originalText;
                    button.disabled = false;
                    
                    showNotification('Sukses', 'Lokasi berhasil didapatkan', 'success');
                },
                function(error) {
                    // Kembalikan tampilan tombol
                    button.innerHTML = originalText;
                    button.disabled = false;
                    
                    let errorMessage;
                    switch (error.code) {
                        case error.PERMISSION_DENIED:
                            errorMessage = 'Izin akses lokasi ditolak';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMessage = 'Informasi lokasi tidak tersedia';
                            break;
                        case error.TIMEOUT:
                            errorMessage = 'Permintaan akses lokasi timeout';
                            break;
                        default:
                            errorMessage = 'Error tidak diketahui';
                    }
                    
                    showNotification('Error', errorMessage, 'error');
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 60000
                }
            );
        }
        
        function filterData() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const kecamatan = document.getElementById('filterKecamatan').value;
            const jenisBantuan = document.getElementById('filterJenisBantuan').value;
            const tahun = document.getElementById('filterTahun').value;
            
            // Filter data berdasarkan kriteria
            filteredData = appData.penerima.filter(item => {
                return (
                    (searchTerm === '' || 
                     item.namaPenerima.toLowerCase().includes(searchTerm) ||
                     item.nik.toLowerCase().includes(searchTerm) ||
                     item.alamatLengkap.toLowerCase().includes(searchTerm)) &&
                    (kecamatan === '' || item.kecamatan === kecamatan) &&
                    (jenisBantuan === '' || item.jenisBantuan === jenisBantuan) &&
                    (tahun === '' || item.tahunAnggaran === tahun)
                );
            });
            
            // Tampilkan data yang difilter
            renderDataTable();
        }
        
        function renderDataTable() {
            const tableBody = document.getElementById('dataTableBody');
            const tableInfo = document.getElementById('tableInfo');
            const pagination = document.getElementById('pagination');
            
            // Kosongkan tabel
            tableBody.innerHTML = '';
            
            // Hitung total halaman
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            
            // Validasi currentPage
            if (currentPage > totalPages) {
                currentPage = totalPages || 1;
            }
            
            // Data untuk halaman saat ini
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, filteredData.length);
            const currentData = filteredData.slice(startIndex, endIndex);
            
            // Isi tabel dengan data
            currentData.forEach((item, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${startIndex + index + 1}</td>
                    <td>${item.namaPenerima}</td>
                    <td>${item.nik}</td>
                    <td><a href="https://wa.me/${item.noWhatsApp}" target="_blank" class="whatsapp-number">${item.noWhatsApp}</a></td>
                    <td>${item.alamatLengkap}</td>
                    <td>${item.kecamatan}</td>
                    <td>${item.desa}</td>
                    <td>${item.jenisBantuan}</td>
                    <td>${item.tahunAnggaran}</td>
                    <td>${item.koordinat}</td>
                    <td>
                        <button class="btn btn-sm btn-primary view-data" data-id="${item.id}">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-warning edit-data" data-id="${item.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger delete-data" data-id="${item.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            // Update info tabel
            tableInfo.textContent = `Menampilkan ${startIndex + 1} sampai ${endIndex} dari ${filteredData.length} data`;
            
            // Generate pagination
            generatePagination(pagination, totalPages);
            
            // Tambahkan event listener untuk tombol aksi
            addDataTableEventListeners();
        }
        
        function generatePagination(paginationElement, totalPages) {
            paginationElement.innerHTML = '';
            
            if (totalPages <= 1) return;
            
            // Tombol Previous
            const prevLi = document.createElement('li');
            prevLi.classList.add('page-item');
            if (currentPage === 1) prevLi.classList.add('disabled');
            
            const prevLink = document.createElement('a');
            prevLink.classList.add('page-link');
            prevLink.href = '#';
            prevLink.innerHTML = '&laquo;';
            prevLink.addEventListener('click', function(e) {
                e.preventDefault();
                if (currentPage > 1) {
                    currentPage--;
                    renderDataTable();
                }
            });
            
            prevLi.appendChild(prevLink);
            paginationElement.appendChild(prevLi);
            
            // Numbered pages
            for (let i = 1; i <= totalPages; i++) {
                const pageLi = document.createElement('li');
                pageLi.classList.add('page-item');
                if (i === currentPage) pageLi.classList.add('active');
                
                const pageLink = document.createElement('a');
                pageLink.classList.add('page-link');
                pageLink.href = '#';
                pageLink.textContent = i;
                pageLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    currentPage = i;
                    renderDataTable();
                });
                
                pageLi.appendChild(pageLink);
                paginationElement.appendChild(pageLi);
            }
            
            // Tombol Next
            const nextLi = document.createElement('li');
            nextLi.classList.add('page-item');
            if (currentPage === totalPages) nextLi.classList.add('disabled');
            
            const nextLink = document.createElement('a');
            nextLink.classList.add('page-link');
            nextLink.href = '#';
            nextLink.innerHTML = '&raquo;';
            nextLink.addEventListener('click', function(e) {
                e.preventDefault();
                if (currentPage < totalPages) {
                    currentPage++;
                    renderDataTable();
                }
            });
            
            nextLi.appendChild(nextLink);
            paginationElement.appendChild(nextLi);
        }
        
        function addDataTableEventListeners() {
            // Tombol lihat data
            document.querySelectorAll('.view-data').forEach(button => {
                button.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    viewData(id);
                });
            });
            
            // Tombol edit data
            document.querySelectorAll('.edit-data').forEach(button => {
                button.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    editData(id);
                });
            });
            
            // Tombol hapus data
            document.querySelectorAll('.delete-data').forEach(button => {
                button.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    deleteData(id);
                });
            });
        }
        
        function viewData(id) {
            const data = appData.penerima.find(item => item.id == id);
            if (!data) return;
            
            // Tampilkan modal dengan detail data
            const modalContent = `
                <div class="row">
                    <div class="col-md-6">
                        <h5>Data Penerima</h5>
                        <table class="table table-bordered">
                            <tr><th>Nama Penerima</th><td>${data.namaPenerima}</td></tr>
                            <tr><th>NIK</th><td>${data.nik}</td></tr>
                            <tr><th>No WhatsApp</th><td>${data.noWhatsApp}</td></tr>
                            <tr><th>Alamat</th><td>${data.alamatLengkap}</td></tr>
                            <tr><th>Kecamatan</th><td>${data.kecamatan}</td></tr>
                            <tr><th>Desa</th><td>${data.desa}</td></tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <h5>Detail Bantuan</h5>
                        <table class="table table-bordered">
                            <tr><th>Tahun Anggaran</th><td>${data.tahunAnggaran}</td></tr>
                            <tr><th>Jenis Bantuan</th><td>${data.jenisBantuan}</td></tr>
                            <tr><th>Nama Kegiatan</th><td>${data.namaKegiatan}</td></tr>
                            <tr><th>Volume</th><td>${data.volume}</td></tr>
                            <tr><th>Nilai Bantuan</th><td>Rp ${formatNumber(data.nilaiBantuan)}</td></tr>
                            <tr><th>Koordinat</th><td>${data.koordinat}</td></tr>
                        </table>
                    </div>
                </div>
            `;
            
            // Buat modal dinamis
            const modal = new bootstrap.Modal(document.createElement('div'));
            modal._element.classList.add('modal', 'fade');
            modal._element.innerHTML = `
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Detail Data Penerima</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            ${modalContent}
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal._element);
            modal.show();
            
            // Hapus modal dari DOM setelah ditutup
            modal._element.addEventListener('hidden.bs.modal', function() {
                document.body.removeChild(modal._element);
            });
        }
        
        function editData(id) {
            // Arahkan ke section input data
            showSection('inputData');
            
            // Temukan data yang akan diedit
            const data = appData.penerima.find(item => item.id == id);
            if (!data) return;
            
            // Isi form dengan data yang ada
            document.getElementById('namaPenerima').value = data.namaPenerima;
            document.getElementById('nik').value = data.nik;
            document.getElementById('noWhatsApp').value = data.noWhatsApp;
            document.getElementById('alamatLengkap').value = data.alamatLengkap;
            document.getElementById('tahunAnggaran').value = data.tahunAnggaran;
            document.getElementById('jenisBantuan').value = data.jenisBantuan;
            document.getElementById('namaKegiatan').value = data.namaKegiatan;
            document.getElementById('volume').value = data.volume;
            document.getElementById('nilaiBantuan').value = data.nilaiBantuan;
            document.getElementById('kecamatan').value = data.kecamatan;
            
            // Isi dropdown desa berdasarkan kecamatan yang dipilih
            fillDesaDropdown(data.kecamatan);
            setTimeout(() => {
                document.getElementById('desa').value = data.desa;
            }, 100);
            
            document.getElementById('koordinat').value = data.koordinat;
            
            // Ubah judul section
            document.querySelector('#inputData .section-title').textContent = 'Edit Data Bantuan';
            
            // Ubah tombol submit
            const submitButton = document.querySelector('#inputForm button[type="submit"]');
            submitButton.innerHTML = '<i class="fas fa-save me-2"></i> Perbarui Data';
            submitButton.classList.remove('btn-primary');
            submitButton.classList.add('btn-warning');
            
            // Hapus event listener submit lama
            const form = document.getElementById('inputForm');
            form.replaceWith(form.cloneNode(true));
            document.getElementById('inputForm').addEventListener('submit', function(e) {
                e.preventDefault();
                updateData(id);
            });
            
            // Scroll ke atas form
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function updateData(id) {
            // Validasi form
            if (!validateForm()) {
                showNotification('Error', 'Harap isi semua field yang wajib diisi', 'error');
                return;
            }
            
            // Temukan index data yang akan diupdate
            const index = appData.penerima.findIndex(item => item.id == id);
            if (index === -1) return;
            
            // Update data
            appData.penerima[index] = {
                id: id,
                namaPenerima: document.getElementById('namaPenerima').value,
                nik: document.getElementById('nik').value,
                noWhatsApp: document.getElementById('noWhatsApp').value,
                alamatLengkap: document.getElementById('alamatLengkap').value,
                tahunAnggaran: document.getElementById('tahunAnggaran').value,
                jenisBantuan: document.getElementById('jenisBantuan').value,
                namaKegiatan: document.getElementById('namaKegiatan').value,
                volume: document.getElementById('volume').value,
                nilaiBantuan: document.getElementById('nilaiBantuan').value,
                kecamatan: document.getElementById('kecamatan').value,
                desa: document.getElementById('desa').value,
                koordinat: document.getElementById('koordinat').value,
                tanggalInput: appData.penerima[index].tanggalInput
            };
            
            // Simpan ke localStorage
            saveAppData();
            
            // Reset form
            document.getElementById('inputForm').reset();
            
            // Kembalikan judul section dan tombol submit
            document.querySelector('#inputData .section-title').textContent = 'Input Data Bantuan';
            
            const submitButton = document.querySelector('#inputForm button[type="submit"]');
            submitButton.innerHTML = '<i class="fas fa-save me-2"></i> Simpan Data';
            submitButton.classList.remove('btn-warning');
            submitButton.classList.add('btn-primary');
            
            // Kembalikan event listener submit
            const form = document.getElementById('inputForm');
            form.replaceWith(form.cloneNode(true));
            document.getElementById('inputForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveData();
            });
            
            // Perbarui dashboard dan tabel
            updateDashboard();
            filterData();
            
            // Tampilkan notifikasi
            showNotification('Sukses', 'Data berhasil diperbarui', 'success');
            
            // Kembali ke section tabel data
            showSection('dataTable');
        }
        
        function deleteData(id) {
            if (!confirm('Apakah Anda yakin ingin menghapus data ini?')) return;
            
            // Hapus data dari array
            appData.penerima = appData.penerima.filter(item => item.id != id);
            
            // Simpan ke localStorage
            saveAppData();
            
            // Perbarui dashboard dan tabel
            updateDashboard();
            filterData();
            
            // Tampilkan notifikasi
            showNotification('Sukses', 'Data berhasil dihapus', 'success');
        }
        
        function resetFilter() {
            document.getElementById('searchInput').value = '';
            document.getElementById('filterKecamatan').value = '';
            document.getElementById('filterJenisBantuan').value = '';
            document.getElementById('filterTahun').value = '';
            
            filterData();
        }
        
        function exportToExcel() {
            if (filteredData.length === 0) {
                showNotification('Info', 'Tidak ada data untuk diekspor', 'info');
                return;
            }
            
            try {
                // Siapkan data untuk Excel
                const dataForExcel = filteredData.map(item => ({
                    'Nama Penerima': item.namaPenerima,
                    'NIK': item.nik,
                    'No WhatsApp': item.noWhatsApp,
                    'Alamat': item.alamatLengkap,
                    'Kecamatan': item.kecamatan,
                    'Desa': item.desa,
                    'Jenis Bantuan': item.jenisBantuan,
                    'Tahun Anggaran': item.tahunAnggaran,
                    'Nama Kegiatan': item.namaKegiatan,
                    'Volume': item.volume,
                    'Nilai Bantuan': item.nilaiBantuan,
                    'Koordinat': item.koordinat,
                    'Tanggal Input': new Date(item.tanggalInput).toLocaleDateString('id-ID')
                }));
                
                // Bu worksheet
                const worksheet = XLSX.utils.json_to_sheet(dataForExcel);
                
                // Bu workbook
                const workbook = XLSX.utils.book_new();
                XLSX.utils.book_append_sheet(workbook, worksheet, 'Data Penerima Bantuan');
                
                // Export ke file Excel
                const today = new Date().toISOString().slice(0, 10);
                XLSX.writeFile(workbook, `Data_BARJAS_${today}.xlsx`);
                
                showNotification('Sukses', 'Data berhasil diekspor ke Excel', 'success');
            } catch (error) {
                showNotification('Error', 'Gagal mengekspor data ke Excel: ' + error.message, 'error');
            }
        }
        
        function exportToPdf() {
            if (filteredData.length === 0) {
                showNotification('Info', 'Tidak ada data untuk diekspor', 'info');
                return;
            }
            
            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Judul
                doc.setFontSize(18);
                doc.text('LAPORAN DATA PENERIMA BANTUAN', 105, 15, { align: 'center' });
                doc.setFontSize(12);
                doc.text('Dinas Peternakan dan Perikanan Kabupaten Situbondo', 105, 22, { align: 'center' });
                
                // Tanggal
                const today = new Date().toLocaleDateString('id-ID');
                doc.setFontSize(10);
                doc.text(`Tanggal: ${today}`, 105, 29, { align: 'center' });
                
                // Data tabel
                const tableColumn = ["Nama", "NIK", "Kecamatan", "Jenis", "Tahun", "Nilai Bantuan"];
                const tableRows = [];
                
                filteredData.forEach(item => {
                    const rowData = [
                        item.namaPenerima,
                        item.nik,
                        item.kecamatan,
                        item.jenisBantuan,
                        item.tahunAnggaran,
                        `Rp ${formatNumber(item.nilaiBantuan)}`
                    ];
                    tableRows.push(rowData);
                });
                
                // Generate PDF
                doc.autoTable({
                    head: [tableColumn],
                    body: tableRows,
                    startY: 35,
                    theme: 'grid',
                    styles: { fontSize: 8 },
                    headStyles: { fillColor: [13, 71, 161] }
                });
                
                // Simpan PDF
                doc.save(`Data_BARJAS_${today.replace(/\//g, '-')}.pdf`);
                
                showNotification('Sukses', 'Data berhasil diekspor ke PDF', 'success');
            } catch (error) {
                showNotification('Error', 'Gagal mengekspor data ke PDF: ' + error.message, 'error');
            }
        }
        
        function printTable() {
            if (filteredData.length === 0) {
                showNotification('Info', 'Tidak ada data untuk dicetak', 'info');
                return;
            }
            
            // Set tanggal cetak
            document.getElementById('printDate').textContent = new Date().toLocaleDateString('id-ID', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // Siapkan window untuk mencetak
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Cetak Data BARJAS</title>
                    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; }
                        .print-header { text-align: center; margin-bottom: 20px; }
                        .print-title { font-size: 18px; font-weight: bold; }
                        .print-subtitle { font-size: 14px; }
                        .print-date { text-align: right; font-size: 12px; margin-bottom: 10px; }
                        table { width: 100%; font-size: 10px; }
                        th { background-color: #0d47a1; color: white; padding: 5px; }
                        td { padding: 4px; border: 1px solid #ddd; }
                        @media print {
                            @page { size: landscape; margin: 0.5cm; }
                            body { padding: 0; }
                        }
                    </style>
                </head>
                <body>
                    <div class="print-header">
                        <h2 class="print-title">LAPORAN DATA PENERIMA BANTUAN</h2>
                        <p class="print-subtitle">Dinas Peternakan dan Perikanan Kabupaten Situbondo</p>
                        <p class="print-date">${new Date().toLocaleDateString('id-ID', {
                            weekday: 'long',
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric'
                        })}</p>
                    </div>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>No</th>
                                <th>Nama Penerima</th>
                                <th>NIK</th>
                                <th>No WhatsApp</th>
                                <th>Alamat</th>
                                <th>Kecamatan</th>
                                <th>Desa</th>
                                <th>Jenis Bantuan</th>
                                <th>Tahun</th>
                                <th>Nilai Bantuan</th>
                            </tr>
                        </thead>
                        <tbody>
            `);
            
            // Isi data tabel
            filteredData.forEach((item, index) => {
                printWindow.document.write(`
                    <tr>
                        <td>${index + 1}</td>
                        <td>${item.namaPenerima}</td>
                        <td>${item.nik}</td>
                        <td>${item.noWhatsApp}</td>
                        <td>${item.alamatLengkap}</td>
                        <td>${item.kecamatan}</td>
                        <td>${item.desa}</td>
                        <td>${item.jenisBantuan}</td>
                        <td>${item.tahunAnggaran}</td>
                        <td>Rp ${formatNumber(item.nilaiBantuan)}</td>
                    </tr>
                `);
            });
            
            printWindow.document.write(`
                        </tbody>
                    </table>
                </body>
                </html>
            `);
            
            printWindow.document.close();
            printWindow.focus();
            
            // Tunggu sebentar sebelum mencetak agar styling terbaca dengan baik
            setTimeout(() => {
                printWindow.print();
                printWindow.close();
            }, 250);
        }
        
        function saveLink() {
            const kecamatan = document.getElementById('linkKecamatan').value;
            const url = document.getElementById('linkUrl').value;
            
            if (!kecamatan || !url) {
                showNotification('Error', 'Harap isi semua field', 'error');
                return;
            }
            
            // Cek apakah link untuk kecamatan ini sudah ada
            const existingIndex = appData.links.findIndex(link => link.kecamatan === kecamatan);
            
            if (existingIndex !== -1) {
                // Update link yang sudah ada
                appData.links[existingIndex].url = url;
                showNotification('Sukses', 'Link berhasil diperbarui', 'success');
            } else {
                // Tambahkan link baru
                appData.links.push({ kecamatan, url });
                showNotification('Sukses', 'Link berhasil ditambahkan', 'success');
            }
            
            // Simpan ke localStorage
            localStorage.setItem(appConfig.linksKey, JSON.stringify(appData.links));
            
            // Perbarui tabel link
            updateLinksTable();
            
            // Reset form
            document.getElementById('linkForm').reset();
        }
        
        function updateLinksTable() {
            const tableBody = document.getElementById('linksTableBody');
            
            // Kosongkan tabel
            tableBody.innerHTML = '';
            
            if (appData.links.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `<td colspan="4" class="text-center">Tidak ada data link</td>`;
                tableBody.appendChild(row);
                return;
            }
            
            // Isi tabel dengan data link
            appData.links.forEach((link, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${link.kecamatan}</td>
                    <td>
                        <a href="${link.url}" target="_blank" class="link-url">${link.url}</a>
                    </td>
                    <td>
                        <button class="btn btn-sm btn-danger delete-link" data-kecamatan="${link.kecamatan}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            // Tambahkan event listener untuk tombol hapus link
            document.querySelectorAll('.delete-link').forEach(button => {
                button.addEventListener('click', function() {
                    const kecamatan = this.getAttribute('data-kecamatan');
                    deleteLink(kecamatan);
                });
            });
        }
        
        function deleteLink(kecamatan) {
            if (!confirm(`Apakah Anda yakin ingin menghapus link untuk kecamatan ${kecamatan}?`)) return;
            
            // Hapus link dari array
            appData.links = appData.links.filter(link => link.kecamatan !== kecamatan);
            
            // Simpan ke localStorage
            localStorage.setItem(appConfig.linksKey, JSON.stringify(appData.links));
            
            // Perbarui tabel link
            updateLinksTable();
            
            // Tampilkan notifikasi
            showNotification('Sukses', 'Link berhasil dihapus', 'success');
        }
        
        function viewAllLinks() {
            const modalBody = document.getElementById('viewLinksModalBody');
            
            if (appData.links.length === 0) {
                modalBody.innerHTML = '<p class="text-center">Tidak ada data link</p>';
            } else {
                let html = '<div class="row">';
                
                appData.links.forEach(link => {
                    html += `
                        <div class="col-md-6 mb-3">
                            <div class="link-item">
                                <div class="link-label">${link.kecamatan}</div>
                                <div class="link-url">
                                    <a href="${link.url}" target="_blank">${link.url}</a>
                                </div>
                                <button class="btn btn-view btn-sm mt-1" data-url="${link.url}">
                                    <i class="fas fa-external-link-alt me-1"></i> Buka Link
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                modalBody.innerHTML = html;
                
                // Tambahkan event listener untuk tombol buka link
                document.querySelectorAll('.btn-view').forEach(button => {
                    button.addEventListener('click', function() {
                        const url = this.getAttribute('data-url');
                        window.open(url, '_blank');
                    });
                });
            }
            
            // Tampilkan modal
            const modal = new bootstrap.Modal(document.getElementById('viewLinksModal'));
            modal.show();
        }
        
        function initMap() {
    // Koordinat default: Kabupaten Situbondo
    const situbondo = { lat: -7.788852, lng: 113.857094 };
    
    // Buat peta menggunakan Leaflet.js (gratis, tidak perlu API key)
    map = L.map('map').setView([situbondo.lat, situbondo.lng], 10);
    
    // Tambahkan tile layer dari OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
    
    // Perbarui peta dengan data
    updateMap();
}

function updateMap() {
    // Hapus semua marker sebelumnya
    markers.forEach(marker => map.removeLayer(marker));
    markers = [];
    
    // Dapatkan filter
    const kecamatan = document.getElementById('mapFilterKecamatan').value;
    const jenisBantuan = document.getElementById('mapFilterJenisBantuan').value;
    const tahun = document.getElementById('mapFilterTahun').value;
    
    // Filter data
    const filteredData = appData.penerima.filter(item => {
        return (
            (kecamatan === '' || item.kecamatan === kecamatan) &&
            (jenisBantuan === '' || item.jenisBantuan === jenisBantuan) &&
            (tahun === '' || item.tahunAnggaran === tahun)
        );
    });
    
    // Tambahkan marker untuk setiap data
    filteredData.forEach(item => {
        if (!item.koordinat) return;
        
        const coords = item.koordinat.split(',').map(coord => parseFloat(coord.trim()));
        if (coords.length !== 2 || isNaN(coords[0]) || isNaN(coords[1])) return;
        
        // Tentukan warna marker berdasarkan jenis bantuan
        let markerColor = 'red';
        if (item.jenisBantuan === 'Peternak') {
            markerColor = 'blue';
        } else if (item.jenisBantuan === 'Perikanan') {
            markerColor = 'green';
        }
        
        // Buat marker custom
        const customIcon = L.divIcon({
            className: 'custom-marker',
            html: `<div style="background-color: ${markerColor}; width: 20px; height: 20px; border-radius: 50%; border: 2px solid white;"></div>`,
            iconSize: [24, 24],
            iconAnchor: [12, 12]
        });
        
        // Buat marker
        const marker = L.marker([coords[0], coords[1]], { icon: customIcon }).addTo(map);
        
        // Buat popup
        marker.bindPopup(`
            <div style="max-width: 300px;">
                <h5>${item.namaPenerima}</h5>
                <p><strong>NIK:</strong> ${item.nik}</p>
                <p><strong>Alamat:</strong> ${item.alamatLengkap}</p>
                <p><strong>Kecamatan:</strong> ${item.kecamatan}</p>
                <p><strong>Desa:</strong> ${item.desa}</p>
                <p><strong>Jenis Bantuan:</strong> ${item.jenisBantuan}</p>
                <p><strong>Tahun:</strong> ${item.tahunAnggaran}</p>
            </div>
        `);
        
        markers.push(marker);
    });
    
    // Jika ada marker, atur zoom dan center peta
    if (markers.length > 0) {
        const group = new L.featureGroup(markers);
        map.fitBounds(group.getBounds());
    }
}
        
        function updateMap() {
            // Hapus semua marker sebelumnya
            markers.forEach(marker => marker.setMap(null));
            markers = [];
            
            // Dapatkan filter
            const kecamatan = document.getElementById('mapFilterKecamatan').value;
            const jenisBantuan = document.getElementById('mapFilterJenisBantuan').value;
            const tahun = document.getElementById('mapFilterTahun').value;
            
            // Filter data
            const filteredData = appData.penerima.filter(item => {
                return (
                    (kecamatan === '' || item.kecamatan === kecamatan) &&
                    (jenisBantuan === '' || item.jenisBantuan === jenisBantuan) &&
                    (tahun === '' || item.tahunAnggaran === tahun)
                );
            });
            
            // Tambahkan marker untuk setiap data
            filteredData.forEach(item => {
                if (!item.koordinat) return;
                
                const coords = item.koordinat.split(',').map(coord => parseFloat(coord.trim()));
                if (coords.length !== 2 || isNaN(coords[0]) || isNaN(coords[1])) return;
                
                const position = { lat: coords[0], lng: coords[1] };
                
                // Tentukan warna marker berdasarkan jenis bantuan
                const icon = {
                    url: 'https://maps.google.com/mapfiles/ms/icons/red-dot.png',
                    scaledSize: new google.maps.Size(32, 32)
                };
                
                if (item.jenisBantuan === 'Peternak') {
                    icon.url = 'https://maps.google.com/mapfiles/ms/icons/blue-dot.png';
                } else if (item.jenisBantuan === 'Perikanan') {
                    icon.url = 'https://maps.google.com/mapfiles/ms/icons/green-dot.png';
                }
                
                // Buat marker
                const marker = new google.maps.Marker({
                    position: position,
                    map: map,
                    title: item.namaPenerima,
                    icon: icon
                });
                
                // Buat info window
                const infoWindow = new google.maps.InfoWindow({
                    content: `
                        <div style="max-width: 300px;">
                            <h5>${item.namaPenerima}</h5>
                            <p><strong>NIK:</strong> ${item.nik}</p>
                            <p><strong>Alamat:</strong> ${item.alamatLengkap}</p>
                            <p><strong>Kecamatan:</strong> ${item.kecamatan}</p>
                            <p><strong>Desa:</strong> ${item.desa}</p>
                            <p><strong>Jenis Bantuan:</strong> ${item.jenisBantuan}</p>
                            <p><strong>Tahun:</strong> ${item.tahunAnggaran}</p>
                        </div>
                    `
                });
                
                // Tambahkan event listener untuk menampilkan info window
                marker.addListener('click', () => {
                    infoWindow.open(map, marker);
                });
                
                markers.push(marker);
            });
            
            // Jika ada marker, atur zoom dan center peta
            if (markers.length > 0) {
                const bounds = new google.maps.LatLngBounds();
                markers.forEach(marker => bounds.extend(marker.getPosition()));
                map.fitBounds(bounds);
            }
        }
        
        function generateReport() {
            const tahun = document.getElementById('reportTahun').value;
            const jenisBantuan = document.getElementById('reportJenisBantuan').value;
            const kecamatan = document.getElementById('reportKecamatan').value;
            
            // Filter data berdasarkan kriteria
            const filteredData = appData.penerima.filter(item => {
                return (
                    (tahun === '' || item.tahunAnggaran === tahun) &&
                    (jenisBantuan === '' || item.jenisBantuan === jenisBantuan) &&
                    (kecamatan === '' || item.kecamatan === kecamatan)
                );
            });
            
            // Kelompokkan data per kecamatan
            const dataByKecamatan = {};
            
            filteredData.forEach(item => {
                if (!dataByKecamatan[item.kecamatan]) {
                    dataByKecamatan[item.kecamatan] = {
                        count: 0,
                        totalNilai: 0
                    };
                }
                
                dataByKecamatan[item.kecamatan].count++;
                dataByKecamatan[item.kecamatan].totalNilai += parseFloat(item.nilaiBantuan) || 0;
            });
            
            // Siapkan data untuk chart
            const labels = Object.keys(dataByKecamatan);
            const dataCount = labels.map(kec => dataByKecamatan[kec].count);
            const dataTotal = labels.map(kec => dataByKecamatan[kec].totalNilai);
            
            // Buat atau perbarui chart
            const ctx = document.getElementById('reportChart').getContext('2d');
            
            if (window.reportChart) {
                window.reportChart.destroy();
            }
            
            window.reportChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Jumlah Penerima',
                            data: dataCount,
                            backgroundColor: 'rgba(13, 71, 161, 0.7)',
                            borderColor: 'rgba(13, 71, 161, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Total Nilai Bantuan (Rp)',
                            data: dataTotal,
                            backgroundColor: 'rgba(0, 105, 92, 0.7)',
                            borderColor: 'rgba(0, 105, 92, 1)',
                            borderWidth: 1,
                            type: 'line',
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Jumlah Penerima'
                            }
                        },
                        y1: {
                            position: 'right',
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Total Nilai Bantuan (Rp)'
                            },
                            grid: {
                                drawOnChartArea: false
                            }
                        }
                    }
                }
            });
            
            // Isi tabel laporan
            const tableBody = document.getElementById('reportTableBody');
            tableBody.innerHTML = '';
            
            labels.forEach(kec => {
                const row = document.createElement('tr');
                const avg = dataByKecamatan[kec].totalNilai / dataByKecamatan[kec].count;
                
                row.innerHTML = `
                    <td>${kec}</td>
                    <td>${dataByKecamatan[kec].count}</td>
                    <td>Rp ${formatNumber(dataByKecamatan[kec].totalNilai.toFixed(2))}</td>
                    <td>Rp ${formatNumber(avg.toFixed(2))}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        function backupData() {
            // Siapkan data untuk backup
            const backupData = {
                appData: appData,
                exportedAt: new Date().toISOString()
            };
            
            // Buat blob dan download
            const blob = new Blob([JSON.stringify(backupData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `barjas_backup_${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Sukses', 'Backup data berhasil', 'success');
        }
        
        function restoreData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (!confirm('Apakah Anda yakin ingin memulihkan data? Data saat ini akan diganti.')) {
                event.target.value = '';
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const backupData = JSON.parse(e.target.result);
                    
                    // Validasi data backup
                    if (!backupData.appData || !backupData.appData.penerima) {
                        throw new Error('Format file backup tidak valid');
                    }
                    
                    // Restore data
                    appData = backupData.appData;
                    
                    // Simpan ke localStorage
                    saveAppData();
                    
                    // Perbarui UI
                    updateDashboard();
                    filterData();
                    updateLinksTable();
                    
                    showNotification('Sukses', 'Data berhasil dipulihkan', 'success');
                } catch (error) {
                    showNotification('Error', 'Gagal memulihkan data: ' + error.message, 'error');
                }
            };
            
            reader.readAsText(file);
            event.target.value = '';
        }
        
        function resetApp() {
            const password = document.getElementById('resetPassword').value;
            
            if (password !== 'reset123') {
                showNotification('Error', 'Kata sandi reset salah', 'error');
                return;
            }
            
            // Hapus semua data dari localStorage
            localStorage.removeItem(appConfig.dataKey);
            localStorage.removeItem(appConfig.linksKey);
            localStorage.removeItem(appConfig.settingsKey);
            
            // Reset variabel appData
            appData = {
                penerima: [],
                links: [],
                settings: {
                    notifications: true,
                    autoSave: true
                }
            };
            
            // Perbarui UI
            updateDashboard();
            filterData();
            updateLinksTable();
            
            // Tutup modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('resetConfirmationModal'));
            modal.hide();
            
            // Reset form
            document.getElementById('resetPassword').value = '';
            
            showNotification('Sukses', 'Aplikasi berhasil direset', 'success');
        }
        
        function updateDashboard() {
            // Update statistik
            document.getElementById('totalPenerima').textContent = appData.penerima.length;
            
            const peternakCount = appData.penerima.filter(item => item.jenisBantuan === 'Peternak').length;
            const perikananCount = appData.penerima.filter(item => item.jenisBantuan === 'Perikanan').length;
            
            document.getElementById('totalPeternak').textContent = peternakCount;
            document.getElementById('totalPerikanan').textContent = perikananCount;
            
            // Hitung jumlah kecamatan unik
            const uniqueKecamatan = new Set(appData.penerima.map(item => item.kecamatan));
            document.getElementById('totalKecamatan').textContent = uniqueKecamatan.size;
            
            // Update data terbaru
            updateRecentData();
            
            // Update chart
            updateCharts();
            
            // Update pengaturan
            document.getElementById('dataCountSetting').value = appData.penerima.length;
        }
        
        function updateRecentData() {
            const tableBody = document.getElementById('recentDataTable');
            tableBody.innerHTML = '';
            
            // Ambil 5 data terbaru
            const recentData = [...appData.penerima]
                .sort((a, b) => new Date(b.tanggalInput) - new Date(a.tanggalInput))
                .slice(0, 5);
            
            if (recentData.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `<td colspan="6" class="text-center">Belum ada data</td>`;
                tableBody.appendChild(row);
                return;
            }
            
            recentData.forEach((item, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${item.namaPenerima}</td>
                    <td>${item.alamatLengkap}</td>
                    <td>${item.jenisBantuan}</td>
                    <td>${new Date(item.tanggalInput).toLocaleDateString('id-ID')}</td>
                    <td>
                        <button class="btn btn-sm btn-primary view-data" data-id="${item.id}">
                            <i class="fas fa-eye"></i>
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            // Tambahkan event listener untuk tombol lihat data
            document.querySelectorAll('#recentDataTable .view-data').forEach(button => {
                button.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    viewData(id);
                });
            });
        }
        
        function updateCharts() {
            // Data untuk chart kecamatan
            const kecamatanData = {};
            appData.penerima.forEach(item => {
                if (!kecamatanData[item.kecamatan]) {
                    kecamatanData[item.kecamatan] = 0;
                }
                kecamatanData[item.kecamatan]++;
            });
            
            // Data untuk chart jenis bantuan
            const jenisData = {
                'Peternak': appData.penerima.filter(item => item.jenisBantuan === 'Peternak').length,
                'Perikanan': appData.penerima.filter(item => item.jenisBantuan === 'Perikanan').length
            };
            
            // Buat atau perbarui chart kecamatan
            const ctxKecamatan = document.getElementById('kecamatanChart').getContext('2d');
            
            if (window.kecamatanChart) {
                window.kecamatanChart.destroy();
            }
            
            window.kecamatanChart = new Chart(ctxKecamatan, {
                type: 'pie',
                data: {
                    labels: Object.keys(kecamatanData),
                    datasets: [{
                        data: Object.values(kecamatanData),
                        backgroundColor: [
                            '#0d47a1', '#1565c0', '#1976d2', '#1e88e5', '#2196f3',
                            '#42a5f5', '#64b5f6', '#90caf9', '#bbdefb', '#e3f2fd',
                            '#00695c', '#00897b', '#009688', '#26a69a', '#4db6ac',
                            '#80cbc4', '#b2dfdb', '#e0f2f1', '#ff8f00', '#ffa000'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right',
                        },
                        title: {
                            display: true,
                            text: 'Distribusi per Kecamatan'
                        }
                    }
                }
            });
            
            // Buat atau perbarui chart jenis bantuan
            const ctxJenis = document.getElementById('jenisBantuanChart').getContext('2d');
            
            if (window.jenisBantuanChart) {
                window.jenisBantuanChart.destroy();
            }
            
            window.jenisBantuanChart = new Chart(ctxJenis, {
                type: 'bar',
                data: {
                    labels: Object.keys(jenisData),
                    datasets: [{
                        label: 'Jumlah Penerima',
                        data: Object.values(jenisData),
                        backgroundColor: ['#0d47a1', '#00695c']
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Jenis Bantuan'
                        }
                    }
                }
            });
        }
        
        function showNotification(title, message, type = 'info') {
            const toast = document.querySelector('.toast');
            const toastTitle = document.getElementById('toastTitle');
            const toastMessage = document.getElementById('toastMessage');
            const toastTime = document.getElementById('toastTime');
            
            // Set judul dan pesan
            toastTitle.textContent = title;
            toastMessage.textContent = message;
            toastTime.textContent = new Date().toLocaleTimeString('id-ID');
            
            // Set warna berdasarkan jenis notifikasi
            if (type === 'success') {
                toast.classList.add('bg-success', 'text-white');
            } else if (type === 'error') {
                toast.classList.add('bg-danger', 'text-white');
            } else if (type === 'warning') {
                toast.classList.add('bg-warning');
            } else {
                toast.classList.add('bg-info', 'text-white');
            }
            
            // Tampilkan notifikasi
            const bsToast = new bootstrap.Toast(toast);
            bsToast.show();
        }
        
        function formatNumber(num) {
            return new Intl.NumberFormat('id-ID').format(num);
        }
        
        function setupParticles() {
            particlesJS('login-particles', {
                particles: {
                    number: {
                        value: 80,
                        density: {
                            enable: true,
                            value_area: 800
                        }
                    },
                    color: {
                        value: "#0d47a1"
                    },
                    shape: {
                        type: "circle",
                        stroke: {
                            width: 0,
                            color: "#000000"
                        }
                    },
                    opacity: {
                        value: 0.5,
                        random: true,
                        anim: {
                            enable: true,
                            speed: 1,
                            opacity_min: 0.1,
                            sync: false
                        }
                    },
                    size: {
                        value: 3,
                        random: true,
                        anim: {
                            enable: true,
                            speed: 2,
                            size_min: 0.1,
                            sync: false
                        }
                    },
                    line_linked: {
                        enable: true,
                        distance: 150,
                        color: "#0d47a1",
                        opacity: 0.4,
                        width: 1
                    },
                    move: {
                        enable: true,
                        speed: 1,
                        direction: "none",
                        random: true,
                        straight: false,
                        out_mode: "out",
                        bounce: false,
                        attract: {
                            enable: false,
                            rotateX: 600,
                            rotateY: 1200
                        }
                    }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: {
                        onhover: {
                            enable: true,
                            mode: "grab"
                        },
                        onclick: {
                            enable: true,
                            mode: "push"
                        },
                        resize: true
                    },
                    modes: {
                        grab: {
                            distance: 140,
                            line_linked: {
                                opacity: 1
                            }
                        },
                        push: {
                            particles_nb: 4
                        }
                    }
                },
                retina_detect: true
            });
        }
        </script>
</body>
</html>
