<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APLIKASI BARJAS - SISTEM BANTUAN</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        /* [KODE CSS YANG SAMA PERSIS SEBELUMNYA] */
        /* Tetap mempertahankan semua style yang sudah ada */
        :root {
            --primary-color: #0d47a1;
            --secondary-color: #00695c;
            --accent-color: #ff8f00;
            --light-blue: #e3f2fd;
            --dark-blue: #082e5c;
            --gradient-primary: linear-gradient(135deg, var(--primary-color), var(--dark-blue));
            --gradient-secondary: linear-gradient(135deg, var(--secondary-color), #004d40);
            --gradient-accent: linear-gradient(135deg, var(--accent-color), #e65100);
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 28px rgba(0,0,0,0.15);
            --login-gradient: linear-gradient(135deg, #0d47a1, #00695c, #ff8f00);
        }
        
        body {
            background: linear-gradient(135deg, #f5f9ff 0%, #e8f5e9 100%);
            font-family: 'Poppins', 'Segoe UI', sans-serif;
            min-height: 100vh;
            padding: 10px 0;
            overflow-x: hidden;
        }
        
        .app-container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            box-shadow: var(--shadow-lg);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            z-index: 10;
        }
        
        .app-header {
            background: var(--gradient-primary);
            color: white;
            padding: 20px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .app-header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
            pointer-events: none;
        }
        
        .app-logo {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .app-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin: 0;
            position: relative;
            z-index: 1;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
        }
        
        .app-subtitle {
            font-size: 1rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 300;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        
        .nav-pills .nav-link {
            border-radius: 8px;
            margin-bottom: 8px;
            padding: 12px 15px;
            font-weight: 500;
            color: #444;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .nav-pills .nav-link:hover {
            background-color: #f0f7ff;
            transform: translateX(3px);
        }
        
        .nav-pills .nav-link.active {
            background: var(--gradient-primary);
            font-weight: 600;
            box-shadow: var(--shadow-md);
            transform: translateX(3px);
            color: white;
        }
        
        .section-title {
            border-left: 4px solid var(--primary-color);
            padding-left: 12px;
            margin: 20px 0;
            font-weight: 700;
            color: var(--dark-blue);
            font-size: 1.4rem;
            position: relative;
        }
        
        .section-title::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 12px;
            width: 40px;
            height: 2px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-success {
            background: var(--gradient-secondary);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-warning {
            background: var(--gradient-accent);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .form-label {
            font-weight: 600;
            color: #444;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .form-label i {
            margin-right: 6px;
            color: var(--primary-color);
        }
        
        .form-control, .form-select {
            border-radius: 8px;
            padding: 12px 15px;
            border: 1px solid #ddd;
            transition: all 0.3s;
            box-shadow: var(--shadow-sm);
            font-size: 0.9rem;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.2);
            transform: translateY(-2px);
        }
        
        .copyright {
            text-align: center;
            padding: 20px;
            background-color: var(--light-blue);
            color: var(--dark-blue);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .data-table {
            font-size: 0.85rem;
            border-collapse: separate;
            border-spacing: 0;
            box-shadow: var(--shadow-sm);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .data-table th {
            background: var(--gradient-primary);
            color: white;
            font-weight: 600;
            padding: 12px 10px;
            text-align: center;
            position: relative;
            font-size: 0.85rem;
        }
        
        .data-table th::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: rgba(255,255,255,0.3);
        }
        
        .data-table td {
            padding: 10px 8px;
            vertical-align: middle;
            border-bottom: 1px solid #eee;
            font-size: 0.85rem;
        }
        
        .data-table tr:nth-child(even) {
            background-color: #f9fbff;
        }
        
        .data-table tr:hover {
            background-color: #edf5ff;
        }
        
        .feature-icon {
            font-size: 1.1rem;
            margin-right: 8px;
            width: 24px;
            text-align: center;
        }
        
        .card {
            border-radius: 10px;
            border: none;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .card-header {
            border-radius: 10px 10px 0 0 !important;
            font-weight: 600;
            padding: 15px 20px;
            background: var(--gradient-primary);
            color: white;
            font-size: 0.95rem;
        }
        
        .stats-box {
            text-align: center;
            padding: 20px 15px;
            border-radius: 10px;
            background: white;
            box-shadow: var(--shadow-md);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .stats-box::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }
        
        .stats-box:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }
        
        .stats-number {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary-color);
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .stats-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .notification-toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1050;
            min-width: 280px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            max-width: calc(100vw - 40px);
        }
        
        .input-error {
            border-color: #dc3545;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2);
        }
        
        .error-message {
            color: #dc3545;
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
            font-weight: 500;
        }
        
        .watermark {
            position: absolute;
            bottom: 10px;
            right: 15px;
            opacity: 0.8;
            font-size: 0.8rem;
            color: white;
            font-weight: 300;
        }
        
        .control-panel {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            box-shadow: var(--shadow-sm);
        }
        
        .control-title {
            font-size: 1rem;
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--light-blue);
        }
        
        .floating-action-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .floating-action-btn:hover {
            transform: scale(1.1) rotate(90deg);
        }
        
        .filter-section {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }
        
        .badge-custom {
            background: var(--gradient-primary);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1050;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            box-shadow: var(--shadow-lg);
        }
        
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1040;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--dark-blue);
        }
        
        /* Responsive styles */
        @media (max-width: 991.98px) {
            .col-md-3.col-lg-2 {
                position: fixed;
                left: -300px;
                top: 0;
                bottom: 0;
                z-index: 1050;
                width: 280px;
                transition: left 0.3s ease;
                overflow-y: auto;
                padding-top: 60px;
            }
            
            .col-md-3.col-lg-2.mobile-show {
                left: 0;
            }
            
            .col-md-9.col-lg-10 {
                width: 100%;
                flex: 0 0 100%;
                max-width: 100%;
            }
            
            .mobile-menu-btn {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .sidebar-overlay.mobile-show {
                display: block;
            }
        }
        
        /* Print Styles - IMPROVED FOR LANDSCAPE */
        @media print {
            @page {
                size: landscape;
                margin: 0.5cm;
            }
            
            body * {
                visibility: hidden;
            }
            
            .app-container, .app-container * {
                visibility: visible;
            }
            
            .app-container {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                box-shadow: none;
            }
            
            .nav-pills, .mobile-menu-btn, .sidebar-overlay, .floating-action-btn,
            .btn-group, .filter-section, .toast {
                display: none !important;
            }
            
            .col-md-3.col-lg-2.p-4.bg-light {
                display: none !important;
            }
            
            .col-md-9.col-lg-10.p-5 {
                width: 100%;
                flex: 0 0 100%;
                max-width: 100%;
                padding: 0 !important;
            }
            
            .copyright {
                display: none;
            }
            
            .data-table {
                font-size: 10px;
                width: 100% !important;
            }
            
            .data-table th, .data-table td {
                padding: 4px 2px;
            }
            
            /* Sembunyikan kolom aksi dan link Google Drive saat mencetak */
            .data-table th:last-child,
            .data-table td:last-child {
                display: none !important;
            }
            
            /* Judul untuk laporan cetak */
            .print-header {
                display: block !important;
                text-align: center;
                margin-bottom: 15px;
            }
            
            .print-title {
                font-size: 18px;
                font-weight: bold;
                margin-bottom: 5px;
            }
            
            .print-subtitle {
                font-size: 14px;
                margin-bottom: 10px;
            }
            
            .print-date {
                font-size: 12px;
                text-align: right;
                margin-bottom: 10px;
            }
        }

        /* WhatsApp link style */
        .whatsapp-link {
            color: #25D366;
            text-decoration: none;
        }
        
        .whatsapp-link:hover {
            text-decoration: underline;
        }
        
        /* View Link Button */
        .btn-view {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .btn-view:hover {
            background: linear-gradient(135deg, #138496, #117a8b);
            color: white;
        }
        
        /* Undo Button */
        .btn-undo {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            border: none;
        }
        
        .btn-undo:hover {
            background: linear-gradient(135deg, #5a6268, #4e555b);
            color: white;
        }
        
        /* WhatsApp number link in table */
        .whatsapp-number {
            color: #25D366;
            cursor: pointer;
            text-decoration: underline;
        }
        
        /* Welcome Modal Styles */
        .welcome-modal .modal-content {
            border-radius: 15px;
            overflow: hidden;
            border: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .welcome-header {
            background: var(--gradient-primary);
            color: white;
            text-align: center;
            padding: 25px;
        }
        
        .welcome-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: white;
        }
        
        .welcome-body {
            padding: 25px;
            text-align: center;
        }
        
        .welcome-footer {
            background: #f8f9fa;
            padding: 15px;
            text-align: center;
            border-top: 1px solid #eee;
        }
        
        .countdown-timer {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 10px;
        }
        
        /* Button untuk cetak per data */
        .btn-print-individual {
            background: linear-gradient(135deg, #6f42c1, #5a2d95);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .btn-print-individual:hover {
            background: linear-gradient(135deg, #5a2d95, #4a2479);
            color: white;
        }
        
        /* Developer Info Styles */
        .developer-info {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            box-shadow: var(--shadow-sm);
        }
        
        .developer-info h6 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #ddd;
        }
        
        .developer-contact p {
            margin-bottom: 8px;
            font-size: 0.85rem;
        }
        
        .developer-contact a {
            color: var(--primary-color);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .developer-contact a:hover {
            color: var(--dark-blue);
            text-decoration: underline;
        }
        
        /* Loading spinner */
        .spinner-border-sm {
            width: 1rem;
            height: 1rem;
        }

        /* Login Modal Styles */
        .login-modal .modal-content {
            border-radius: 15px;
            overflow: hidden;
            border: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .login-header {
            background: var(--login-gradient);
            color: white;
            text-align: center;
            padding: 25px 20px;
            position: relative;
        }

        .login-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: white;
        }

        .login-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0;
        }

        .login-subtitle {
            font-size: 1rem;
            opacity: 0.9;
            margin: 5px 0 0;
        }

        .login-body {
            padding: 25px;
            position: relative;
            z-index: 1;
        }

        .login-form-group {
            margin-bottom: 20px;
        }

        .login-form-label {
            font-weight: 600;
            color: var(--dark-blue);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }

        .login-form-label i {
            margin-right: 10px;
            color: var(--dark-blue);
        }

        .login-form-control {
            border-radius: 8px;
            padding: 12px 15px;
            border: 2px solid #ddd;
            transition: all 0.3s;
        }

        .login-form-control:focus {
            border-color: var(--dark-blue);
            box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.2);
        }

        .login-input-group-text {
            background: var(--light-blue);
            border: 2px solid #ddd;
            border-left: none;
        }

        .btn-login {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 12px;
            font-weight: 600;
            border-radius: 8px;
            width: 100%;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 105, 92, 0.4);
        }

        .btn-login:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .login-security-notice {
            text-align: center;
            margin-top: 20px;
            font-size: 0.85rem;
            color: #666;
        }

        .login-attempts-count {
            text-align: center;
            font-size: 0.9rem;
            color: #ff8f00;
            font-weight: 500;
            margin-top: 5px;
        }

        .login-blocked-message {
            text-align: center;
            background: rgba(220, 53, 69, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            color: #dc3545;
            font-weight: 500;
        }

        .login-countdown {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--dark-blue);
        }

        .login-developer-info {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }

        .login-developer-info h6 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 10px;
        }

        .login-developer-info p {
            margin-bottom: 5px;
            font-size: 0.85rem;
        }

        .login-developer-info a {
            color: var(--primary-color);
            text-decoration: none;
            transition: all 0.3s;
        }

        .login-developer-info a:hover {
            color: var(--dark-blue);
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn" id="mobileMenuBtn">
        <i class="fas fa-bars"></i>
    </button>
    
    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <div class="app-container">
        <div class="app-header">
            <div class="app-logo">
                <i class="fas fa-hands-helping"></i>
            </div>
            <h1 class="app-title">BARJAS</h1>
            <p class="app-subtitle">Sistem Bantuan Terpadu</p>
            <div class="watermark">
                <i class="fas fa-lock me-1"></i> Aman & Terenkripsi
            </div>
        </div>
        
        <div class="row g-0">
            <!-- Sidebar Navigation -->
            <div class="col-md-3 col-lg-2 p-4 bg-light" id="sidebarMenu">
                <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                    <a class="nav-link active" id="v-pills-dashboard-tab" data-bs-toggle="pill" href="#v-pills-dashboard" role="tab" aria-controls="v-pills-dashboard" aria-selected="true">
                        <i class="fas fa-tachometer-alt feature-icon"></i> Dashboard
                    </a>
                    <a class="nav-link" id="v-pills-input-tab" data-bs-toggle="pill" href="#v-pills-input" role="tab" aria-controls="v-pills-input" aria-selected="false">
                        <i class="fas fa-plus-circle feature-icon"></i> Input Data
                    </a>
                    <a class="nav-link" id="v-pills-data-tab" data-bs-toggle="pill" href="#v-pills-data" role="tab" aria-controls="v-pills-data" aria-selected="false">
                        <i class="fas fa-database feature-icon"></i> Data Bantuan
                    </a>
                    <a class="nav-link" id="v-pills-statistik-tab" data-bs-toggle="pill" href="#v-pills-statistik" role="tab" aria-controls="v-pills-statistik" aria-selected="false">
                        <i class="fas fa-chart-bar feature-icon"></i> Statistik
                    </a>
                    <a class="nav-link" id="v-pills-laporan-tab" data-bs-toggle="pill" href="#v-pills-laporan" role="tab" aria-controls="v-pills-laporan" aria-selected="false">
                        <i class="fas fa-file-pdf feature-icon"></i> Laporan
                    </a>
                    <a class="nav-link" id="v-pills-pengaturan-tab" data-bs-toggle="pill" href="#v-pills-pengaturan" role="tab" aria-controls="v-pills-pengaturan" aria-selected="false">
                        <i class="fas fa-cog feature-icon"></i> Pengaturan
                    </a>
                    <a class="nav-link" id="v-pills-bantuan-tab" data-bs-toggle="pill" href="#v-pills-bantuan" role="tab" aria-controls="v-pills-bantuan" aria-selected="false">
                        <i class="fas fa-question-circle feature-icon"></i> Bantuan
                    </a>
                    <hr>
                    <a class="nav-link" href="#" id="logoutBtn">
                        <i class="fas fa-sign-out-alt feature-icon"></i> Keluar
                    </a>
                </div>
                
                <!-- Developer Info - DIHAPUS SESUAI PERINTAH -->
            </div>
            
            <!-- Main Content -->
            <div class="col-md-9 col-lg-10 p-5">
                <div class="tab-content" id="v-pills-tabContent">
                    <!-- Dashboard -->
                    <div class="tab-pane fade show active" id="v-pills-dashboard" role="tabpanel" aria-labelledby="v-pills-dashboard-tab">
                        <h2 class="section-title">Dashboard</h2>
                        
                        <div class="row">
                            <div class="col-md-3">
                                <div class="stats-box">
                                    <i class="fas fa-users fa-2x text-primary"></i>
                                    <div class="stats-number" id="totalPenerima">0</div>
                                    <div class="stats-label">Total Penerima</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-box">
                                    <i class="fas fa-hand-holding-usd fa-2x text-success"></i>
                                    <div class="stats-number" id="totalBantuan">0</div>
                                    <div class="stats-label">Total Bantuan</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-box">
                                    <i class="fas fa-map-marker-alt fa-2x text-warning"></i>
                                    <div class="stats-number" id="totalKecamatan">0</div>
                                    <div class="stats-label">Kecamatan</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-box">
                                    <i class="fas fa-calendar-alt fa-2x text-info"></i>
                                    <div class="stats-number" id="tahunAktif">2023</div>
                                    <div class="stats-label">Tahun Aktif</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="fas fa-chart-pie me-2"></i> Distribusi Bantuan per Jenis
                                    </div>
                                    <div class="card-body">
                                        <canvas id="jenisBantuanChart" height="250"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="fas fa-chart-line me-2"></i> Tren Bantuan per Bulan
                                    </div>
                                    <div class="card-body">
                                        <canvas id="trenBantuanChart" height="250"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="fas fa-history me-2"></i> Data Terbaru
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-hover data-table">
                                                <thead>
                                                    <tr>
                                                        <th>Nama</th>
                                                        <th>NIK</th>
                                                        <th>WhatsApp</th>
                                                        <th>Jenis Bantuan</th>
                                                        <th>Jumlah</th>
                                                        <th>Tanggal</th>
                                                        <th>Aksi</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="recentDataTable">
                                                    <tr>
                                                        <td colspan="7" class="text-center">Tidak ada data</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Input Data -->
                    <div class="tab-pane fade" id="v-pills-input" role="tabpanel" aria-labelledby="v-pills-input-tab">
                        <h2 class="section-title">Input Data Bantuan</h2>
                        
                        <form id="inputForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card mb-4">
                                        <div class="card-header">Data Penerima</div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label for="nama" class="form-label"><i class="fas fa-user"></i> Nama Lengkap</label>
                                                <input type="text" class="form-control" id="nama" required>
                                                <div class="error-message" id="namaError">Nama harus diisi</div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="nik" class="form-label"><i class="fas fa-id-card"></i> NIK</label>
                                                <input type="text" class="form-control" id="nik" maxlength="16" required>
                                                <div class="error-message" id="nikError">NIK harus 16 digit angka</div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="whatsapp" class="form-label"><i class="fab fa-whatsapp"></i> Nomor WhatsApp</label>
                                                <input type="text" class="form-control" id="whatsapp" required>
                                                <div class="error-message" id="whatsappError">Nomor WhatsApp harus valid</div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="namaKelompok" class="form-label"><i class="fas fa-users"></i> Nama Kelompok (jika ada)</label>
                                                <input type="text" class="form-control" id="namaKelompok">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="card mb-4">
                                        <div class="card-header">Detail Bantuan</div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label for="jenisBantuan" class="form-label"><i class="fas fa-box"></i> Jenis Bantuan</label>
                                                <select class="form-select" id="jenisBantuan" required>
                                                    <option value="">Pilih Jenis Bantuan</option>
                                                    <option value="Bantuan Langsung Tunai">Bantuan Langsung Tunai</option>
                                                    <option value="Bantuan Sembako">Bantuan Sembako</option>
                                                    <option value="Bantuan Pendidikan">Bantuan Pendidikan</option>
                                                    <option value="Bantuan Kesehatan">Bantuan Kesehatan</option>
                                                    <option value="Bantuan UMKM">Bantuan UMKM</option>
                                                    <option value="Bantuan Pertanian">Bantuan Pertanian</option>
                                                    <option value="Bantuan Lainnya">Bantuan Lainnya</option>
                                                </select>
                                                <div class="error-message" id="jenisBantuanError">Jenis bantuan harus dipilih</div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="jumlahBantuan" class="form-label"><i class="fas fa-coins"></i> Jumlah Bantuan</label>
                                                <input type="number" class="form-control" id="jumlahBantuan" required>
                                                <div class="error-message" id="jumlahBantuanError">Jumlah bantuan harus diisi</div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="tanggal" class="form-label"><i class="fas fa-calendar"></i> Tanggal Penerimaan</label>
                                                <input type="date" class="form-control" id="tanggal" required>
                                                <div class="error-message" id="tanggalError">Tanggal harus diisi</div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="tahun" class="form-label"><i class="fas fa-calendar-alt"></i> Tahun</label>
                                                <select class="form-select" id="tahun" required>
                                                    <option value="">Pilih Tahun</option>
                                                    <!-- Opsi tahun akan diisi oleh JavaScript -->
                                                </select>
                                                <div class="error-message" id="tahunError">Tahun harus dipilih</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card mb-4">
                                        <div class="card-header">Lokasi & Keterangan</div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="kecamatan" class="form-label"><i class="fas fa-map-marked-alt"></i> Kecamatan</label>
                                                        <input type="text" class="form-control" id="kecamatan" required>
                                                        <div class="error-message" id="kecamatanError">Kecamatan harus diisi</div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="desa" class="form-label"><i class="fas fa-map-marker-alt"></i> Desa</label>
                                                        <select class="form-select" id="desa" required>
                                                            <option value="">Pilih Desa</option>
                                                            <!-- Opsi desa akan diisi oleh JavaScript -->
                                                        </select>
                                                        <div class="error-message" id="desaError">Desa harus dipilih</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="keterangan" class="form-label"><i class="fas fa-sticky-note"></i> Keterangan (Opsional)</label>
                                                <textarea class="form-control" id="keterangan" rows="3"></textarea>
                                            </div>
                                            <div class="mb-3">
                                                <label for="driveLink" class="form-label"><i class="fab fa-google-drive"></i> Google Drive Link (Opsional)</label>
                                                <input type="url" class="form-control" id="driveLink" placeholder="https://drive.google.com/...">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-flex justify-content-between">
                                <button type="reset" class="btn btn-secondary">
                                    <i class="fas fa-undo me-2"></i> Reset Form
                                </button>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save me-2"></i> Simpan Data
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Data Bantuan -->
                    <div class="tab-pane fade" id="v-pills-data" role="tabpanel" aria-labelledby="v-pills-data-tab">
                        <h2 class="section-title">Data Bantuan</h2>
                        
                        <div class="filter-section">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <label for="filterTahun" class="form-label"><i class="fas fa-filter"></i> Filter Tahun</label>
                                        <select class="form-select" id="filterTahun">
                                            <option value="">Semua Tahun</option>
                                            <!-- Opsi tahun akan diisi oleh JavaScript -->
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <label for="filterJenis" class="form-label"><i class="fas fa-filter"></i> Filter Jenis</label>
                                        <select class="form-select" id="filterJenis">
                                            <option value="">Semua Jenis</option>
                                            <option value="Bantuan Langsung Tunai">Bantuan Langsung Tunai</option>
                                            <option value="Bantuan Sembako">Bantuan Sembako</option>
                                            <option value="Bantuan Pendidikan">Bantuan Pendidikan</option>
                                            <option value="Bantuan Kesehatan">Bantuan Kesehatan</option>
                                            <option value="Bantuan UMKM">Bantuan UMKM</option>
                                            <option value="Bantuan Pertanian">Bantuan Pertanian</option>
                                            <option value="Bantuan Lainnya">Bantuan Lainnya</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <label for="filterKecamatan" class="form-label"><i class="fas fa-filter"></i> Filter Kecamatan</label>
                                        <input type="text" class="form-control" id="filterKecamatan">
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <label for="filterDesa" class="form-label"><i class="fas fa-filter"></i> Filter Desa</label>
                                        <select class="form-select" id="filterDesa">
                                            <option value="">Semua Desa</option>
                                            <!-- Opsi desa akan diisi oleh JavaScript -->
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex justify-content-between">
                                <div>
                                    <button class="btn btn-primary" id="applyFilterBtn">
                                        <i class="fas fa-check me-2"></i> Terapkan Filter
                                    </button>
                                    <button class="btn btn-secondary" id="resetFilterBtn">
                                        <i class="fas fa-sync me-2"></i> Reset Filter
                                    </button>
                                </div>
                                <div>
                                    <button class="btn btn-success" id="exportExcelBtn">
                                        <i class="fas fa-file-excel me-2"></i> Export Excel
                                    </button>
                                    <button class="btn btn-danger" id="exportPdfBtn">
                                        <i class="fas fa-file-pdf me-2"></i> Export PDF
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="table-responsive">
                            <table class="table table-hover data-table" id="dataTable">
                                <thead>
                                    <tr>
                                        <th>No</th>
                                        <th>Nama</th>
                                        <th>NIK</th>
                                        <th>WhatsApp</th>
                                        <th>Jenis Bantuan</th>
                                        <th>Jumlah</th>
                                        <th>Tanggal</th>
                                        <th>Tahun</th>
                                        <th>Kecamatan</th>
                                        <th>Desa</th>
                                        <th>Keterangan</th>
                                        <th>Drive Link</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="dataTableBody">
                                    <tr>
                                        <td colspan="13" class="text-center">Tidak ada data</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="d-flex justify-content-between align-items-center mt-3">
                            <div class="fw-bold" id="showingEntries">Menampilkan 0 dari 0 data</div>
                            <nav>
                                <ul class="pagination" id="pagination">
                                    <li class="page-item disabled">
                                        <a class="page-link" href="#" tabindex="-1">Previous</a>
                                    </li>
                                    <li class="page-item active">
                                        <a class="page-link" href="#">1</a>
                                    </li>
                                    <li class="page-item disabled">
                                        <a class="page-link" href="#">Next</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    
                    <!-- Statistik -->
                    <div class="tab-pane fade" id="v-pills-statistik" role="tabpanel" aria-labelledby="v-pills-statistik-tab">
                        <h2 class="section-title">Statistik Bantuan</h2>
                        
                        <div class="row">
                            <div class="col-md-8">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-chart-bar me-2"></i> Statistik Bantuan per Tahun
                                    </div>
                                    <div class="card-body">
                                        <canvas id="statistikTahunChart" height="300"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-chart-pie me-2"></i> Distribusi per Kecamatan
                                    </div>
                                    <div class="card-body">
                                        <canvas id="statistikKecamatanChart" height="300"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-table me-2"></i> Data Statistik per Tahun
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-hover data-table">
                                                <thead>
                                                    <tr>
                                                        <th>Tahun</th>
                                                        <th>Jumlah Penerima</th>
                                                        <th>Total Bantuan</th>
                                                        <th>Rata-rata per Penerima</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="statistikTahunTable">
                                                    <tr>
                                                        <td colspan="4" class="text-center">Tidak ada data</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-table me-2"></i> Data Statistik per Kecamatan
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-hover data-table">
                                                <thead>
                                                    <tr>
                                                        <th>Kecamatan</th>
                                                        <th>Jumlah Penerima</th>
                                                        <th>Total Bantuan</th>
                                                        <th>Rata-rata per Penerima</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="statistikKecamatanTable">
                                                    <tr>
                                                        <td colspan="4" class="text-center">Tidak ada data</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Laporan -->
                    <div class="tab-pane fade" id="v-pills-laporan" role="tabpanel" aria-labelledby="v-pills-laporan-tab">
                        <h2 class="section-title">Laporan Bantuan</h2>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-print me-2"></i> Cetak Laporan
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label for="laporanTahun" class="form-label"><i class="fas fa-calendar-alt"></i> Pilih Tahun</label>
                                            <select class="form-select" id="laporanTahun">
                                                <option value="">Semua Tahun</option>
                                                <!-- Opsi tahun akan diisi oleh JavaScript -->
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="laporanJenis" class="form-label"><i class="fas fa-box"></i> Pilih Jenis Bantuan</label>
                                            <select class="form-select" id="laporanJenis">
                                                <option value="">Semua Jenis</option>
                                                <option value="Bantuan Langsung Tunai">Bantuan Langsung Tunai</option>
                                                <option value="Bantuan Sembako">Bantuan Sembako</option>
                                                <option value="Bantuan Pendidikan">Bantuan Pendidikan</option>
                                                <option value="Bantuan Kesehatan">Bantuan Kesehatan</option>
                                                <option value="Bantuan UMKM">Bantuan UMKM</option>
                                                <option value="Bantuan Pertanian">Bantuan Pertanian</option>
                                                <option value="Bantuan Lainnya">Bantuan Lainnya</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="laporanKecamatan" class="form-label"><i class="fas fa-map-marked-alt"></i> Pilih Kecamatan</label>
                                            <input type="text" class="form-control" id="laporanKecamatan">
                                        </div>
                                        <div class="mb-3">
                                            <label for="laporanDesa" class="form-label"><i class="fas fa-map-marker-alt"></i> Pilih Desa</label>
                                            <select class="form-select" id="laporanDesa">
                                                <option value="">Semua Desa</option>
                                                <!-- Opsi desa akan diisi oleh JavaScript -->
                                            </select>
                                        </div>
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-primary" id="cetakLaporanBtn">
                                                <i class="fas fa-print me-2"></i> Cetak Laporan
                                            </button>
                                            <button class="btn btn-success" id="unduhLaporanBtn">
                                                <i class="fas fa-download me-2"></i> Unduh sebagai PDF
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-info-circle me-2"></i> Informasi Laporan
                                    </div>
                                    <div class="card-body">
                                        <div class="alert alert-info">
                                            <h6><i class="fas fa-lightbulb me-2"></i> Tips Mencetak Laporan</h6>
                                            <ul class="mb-0 ps-3">
                                                <li>Gunakan orientasi <strong>landscape</strong> untuk hasil terbaik</li>
                                                <li>Pastikan kertas yang digunakan adalah A4</li>
                                                <li>Untuk kualitas cetak terbaik, gunakan pengaturan "Background Graphics"</li>
                                            </ul>
                                        </div>
                                        <div class="alert alert-warning">
                                            <h6><i class="fas fa-exclamation-triangle me-2"></i> Perhatian</h6>
                                            <p class="mb-0">Data yang dicetak adalah data yang tersimpan di browser Anda. Pastikan data sudah disimpan dengan benar sebelum mencetak.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pengaturan -->
                    <div class="tab-pane fade" id="v-pills-pengaturan" role="tabpanel" aria-labelledby="v-pills-pengaturan-tab">
                        <h2 class="section-title">Pengaturan Aplikasi</h2>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-database me-2"></i> Kelola Data
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label"><i class="fas fa-save me-2"></i> Backup Data</label>
                                            <p class="text-muted small">Simpan salinan data Anda ke file JSON untuk keamanan.</p>
                                            <button class="btn btn-primary" id="backupDataBtn">
                                                <i class="fas fa-download me-2"></i> Backup Data
                                            </button>
                                        </div>
                                        <hr>
                                        <div class="mb-3">
                                            <label for="restoreFile" class="form-label"><i class="fas fa-upload me-2"></i> Restore Data</label>
                                            <p class="text-muted small">Muat data dari file JSON backup sebelumnya.</p>
                                            <input type="file" class="form-control" id="restoreFile" accept=".json">
                                            <div class="mt-2">
                                                <button class="btn btn-success" id="restoreDataBtn" disabled>
                                                    <i class="fas fa-upload me-2"></i> Restore Data
                                                </button>
                                            </div>
                                        </div>
                                        <hr>
                                        <div class="mb-3">
                                            <label class="form-label"><i class="fas fa-trash-alt me-2"></i> Hapus Semua Data</label>
                                            <p class="text-muted small">Hapus semua data yang tersimpan di aplikasi. Tindakan ini tidak dapat dibatalkan!</p>
                                            <button class="btn btn-danger" id="hapusSemuaDataBtn">
                                                <i class="fas fa-trash me-2"></i> Hapus Semua Data
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-paint-brush me-2"></i> Tema Aplikasi
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label for="pilihTema" class="form-label"><i class="fas fa-palette me-2"></i> Pilih Tema</label>
                                            <select class="form-select" id="pilihTema">
                                                <option value="default">Default (Biru)</option>
                                                <option value="hijau">Hijau</option>
                                                <option value="oranye">Oranye</option>
                                                <option value="ungu">Ungu</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label"><i class="fas fa-desktop me-2"></i> Mode Tampilan</label>
                                            <div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" name="modeTampilan" id="modeTerang" value="terang" checked>
                                                    <label class="form-check-label" for="modeTerang">Terang</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" name="modeTampilan" id="modeGelap" value="gelap">
                                                    <label class="form-check-label" for="modeGelap">Gelap</label>
                                                </div>
                                            </div>
                                        </div>
                                        <hr>
                                        <div class="mb-3">
                                            <label class="form-label"><i class="fas fa-language me-2"></i> Bahasa</label>
                                            <select class="form-select" id="pilihBahasa">
                                                <option value="id">Bahasa Indonesia</option>
                                                <option value="en">English</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-info-circle me-2"></i> Informasi Aplikasi
                                    </div>
                                    <div class="card-body">
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                Versi Aplikasi
                                                <span class="badge bg-primary rounded-pill">1.2.0</span>
                                            </li>
                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                Jumlah Data Tersimpan
                                                <span class="badge bg-primary rounded-pill" id="jumlahDataTersimpan">0</span>
                                            </li>
                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                Tanggal Backup Terakhir
                                                <span class="badge bg-secondary rounded-pill" id="lastBackupDate">-</span>
                                            </li>
                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                Browser
                                                <span class="badge bg-info rounded-pill" id="browserInfo">-</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bantuan -->
                    <div class="tab-pane fade" id="v-pills-bantuan" role="tabpanel" aria-labelledby="v-pills-bantuan-tab">
                        <h2 class="section-title">Bantuan & Panduan</h2>
                        
                        <div class="row">
                            <div class="col-md-8">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-question-circle me-2"></i> Panduan Penggunaan
                                    </div>
                                    <div class="card-body">
                                        <div class="accordion" id="accordionPanduan">
                                            <div class="accordion-item">
                                                <h2 class="accordion-header">
                                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
                                                        <i class="fas fa-plus-circle me-2"></i> Cara Input Data
                                                    </button>
                                                </h2>
                                                <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionPanduan">
                                                    <div class="accordion-body">
                                                        <ol>
                                                            <li>Buka menu <strong>Input Data</strong></li>
                                                            <li>Isi semua field yang wajib diisi (ditandai dengan *)</li>
                                                            <li>Pastikan NIK terdiri dari 16 digit angka</li>
                                                            <li>Pilih jenis bantuan dari dropdown yang tersedia</li>
                                                            <li>Masukkan jumlah bantuan dalam angka</li>
                                                            <li>Pilih tanggal, tahun, kecamatan, dan desa</li>
                                                            <li>Klik tombol <strong>Simpan Data</strong> untuk menyimpan</li>
                                                        </ol>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="accordion-item">
                                                <h2 class="accordion-header">
                                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
                                                        <i class="fas fa-database me-2"></i> Cara Melihat dan Mencari Data
                                                    </button>
                                                </h2>
                                                <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionPanduan">
                                                    <div class="accordion-body">
                                                        <p>Untuk melihat data yang sudah diinput:</p>
                                                        <ol>
                                                            <li>Buka menu <strong>Data Bantuan</strong></li>
                                                            <li>Gunakan filter yang tersedia untuk menyaring data berdasarkan tahun, jenis bantuan, kecamatan, atau desa</li>
                                                            <li>Klik tombol <strong>Terapkan Filter</strong> untuk menerapkan filter</li>
                                                            <li>Gunakan tombol <strong>Export Excel</strong> atau <strong>Export PDF</strong> untuk mengekspor data</li>
                                                        </ol>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="accordion-item">
                                                <h2 class="accordion-header">
                                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
                                                        <i class="fas fa-chart-bar me-2"></i> Cara Melihat Statistik
                                                    </button>
                                                </h2>
                                                <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionPanduan">
                                                    <div class="accordion-body">
                                                        <p>Menu <strong>Statistik</strong> menampilkan visualisasi data dalam bentuk grafik dan tabel:</p>
                                                        <ul>
                                                            <li>Grafik batang menunjukkan distribusi bantuan per tahun</li>
                                                            <li>Grafik pie menunjukkan distribusi bantuan per kecamatan</li>
                                                            <li>Tabel statistik per tahun menampilkan ringkasan data per tahun</li>
                                                            <li>Tabel statistik per kecamatan menampilkan ringkasan data per kecamatan</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="accordion-item">
                                                <h2 class="accordion-header">
                                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour">
                                                        <i class="fas fa-print me-2"></i> Cara Mencetak Laporan
                                                    </button>
                                                </h2>
                                                <div id="collapseFour" class="accordion-collapse collapse" data-bs-parent="#accordionPanduan">
                                                    <div class="accordion-body">
                                                        <p>Untuk mencetak laporan:</p>
                                                        <ol>
                                                            <li>Buka menu <strong>Laporan</strong></li>
                                                            <li>Pilih tahun, jenis bantuan, kecamatan, atau desa yang ingin difilter</li>
                                                            <li>Klik tombol <strong>Cetak Laporan</strong> untuk mencetak</li>
                                                            <li>Atau klik tombol <strong>Unduh sebagai PDF</strong> untuk menyimpan sebagai file PDF</li>
                                                        </ol>
                                                        <p class="mb-0"><strong>Tip:</strong> Untuk hasil cetakan terbaik, gunakan orientasi landscape.</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="accordion-item">
                                                <h2 class="accordion-header">
                                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive">
                                                        <i class="fas fa-cog me-2"></i> Cara Backup dan Restore Data
                                                    </button>
                                                </h2>
                                                <div id="collapseFive" class="accordion-collapse collapse" data-bs-parent="#accordionPanduan">
                                                    <div class="accordion-body">
                                                        <p><strong>Backup Data:</strong></p>
                                                        <ol>
                                                            <li>Buka menu <strong>Pengaturan</strong></li>
                                                            <li>Di bagian <strong>Kelola Data</strong>, klik tombol <strong>Backup Data</strong></li>
                                                            <li>File JSON akan diunduh ke komputer Anda</li>
                                                        </ol>
                                                        <p><strong>Restore Data:</strong></p>
                                                        <ol>
                                                            <li>Buka menu <strong>Pengaturan</strong></li>
                                                            <li>Di bagian <strong>Kelola Data</strong>, klik <strong>Pilih File</strong> dan pilih file backup JSON</li>
                                                            <li>Klik tombol <strong>Restore Data</strong> untuk mengimpor data</li>
                                                        </ol>
                                                        <p class="mb-0 text-danger"><strong>Peringatan:</strong> Restore data akan menggantikan semua data yang ada dengan data dari file backup.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-exclamation-triangle me-2"></i> Troubleshooting
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <h6><i class="fas fa-question me-2"></i> Data tidak tersimpan?</h6>
                                            <p class="small">Pastikan semua field wajib diisi dan NIK terdiri dari 16 digit angka.</p>
                                        </div>
                                        <div class="mb-3">
                                            <h6><i class="fas fa-question me-2"></i> Filter tidak bekerja?</h6>
                                            <p class="small">Klik tombol <strong>Terapkan Filter</strong> setelah memilih kriteria filter.</p>
                                        </div>
                                        <div class="mb-3">
                                            <h6><i class="fas fa-question me-2"></i> Aplikasi lambat?</h6>
                                            <p class="small">Jika data sudah banyak, coba hapus data yang tidak diperlukan atau gunakan filter untuk membatasi data yang ditampilkan.</p>
                                        </div>
                                        <div class="mb-3">
                                            <h6><i class="fas fa-question me-2"></i> Cetakan tidak rapi?</h6>
                                            <p class="small">Pastikan menggunakan orientasi landscape dan kertas A4 untuk hasil terbaik.</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-shield-alt me-2"></i> Keamanan Data
                                    </div>
                                    <div class="card-body">
                                        <div class="alert alert-info">
                                            <h6><i class="fas fa-info-circle me-2"></i> Informasi Penting</h6>
                                            <p class="small mb-0">Data disimpan secara lokal di browser Anda. Lakukan backup secara berkala untuk mencegah kehilangan data.</p>
                                        </div>
                                        <div class="alert alert-warning">
                                            <h6><i class="fas fa-exclamation-triangle me-2"></i> Perhatian</h6>
                                            <p class="small mb-0">Jika Anda menghapus history browser atau data situs, semua data aplikasi akan hilang. Pastikan sudah melakukan backup.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            &copy; 2023 BARJAS - Sistem Bantuan Terpadu. Hak Cipta Dilindungi.
        </div>
    </div>
    
    <!-- Floating Action Button -->
    <div class="floating-action-btn" id="fabBtn">
        <i class="fas fa-plus"></i>
    </div>
    
    <!-- Notification Toast -->
    <div class="toast notification-toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="true" data-bs-delay="5000">
        <div class="toast-header">
            <i class="fas fa-bell me-2 text-primary"></i>
            <strong class="me-auto">BARJAS</strong>
            <small>Baru saja</small>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body" id="toastMessage">
            Pesan notifikasi akan muncul di sini
        </div>
    </div>
    
    <!-- Login Modal -->
    <div class="modal fade welcome-modal" id="loginModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="login-header">
                    <i class="fas fa-hands-helping login-icon"></i>
                    <h3 class="login-title">BARJAS</h3>
                    <p class="login-subtitle">Sistem Bantuan Terpadu</p>
                </div>
                <div class="login-body">
                    <form id="loginForm">
                        <div class="login-form-group">
                            <label for="loginUsername" class="login-form-label"><i class="fas fa-user"></i> Username</label>
                            <input type="text" class="login-form-control" id="loginUsername" placeholder="Masukkan username" required>
                        </div>
                        <div class="login-form-group">
                            <label for="loginPassword" class="login-form-label"><i class="fas fa-lock"></i> Password</label>
                            <div class="input-group">
                                <input type="password" class="login-form-control" id="loginPassword" placeholder="Masukkan password" required>
                                <span class="input-group-text" id="togglePassword">
                                    <i class="fas fa-eye"></i>
                                </span>
                            </div>
                        </div>
                        <button type="submit" class="btn-login" id="loginSubmitBtn">
                            <i class="fas fa-sign-in-alt me-2"></i> Masuk
                        </button>
                    </form>
                    
                    <div class="login-security-notice">
                        <i class="fas fa-shield-alt me-1"></i> Data Anda terlindungi dan disimpan secara lokal
                    </div>
                    
                    <div class="login-attempts-count" id="loginAttemptsInfo" style="display: none;">
                        Percobaan login tersisa: <span id="remainingAttempts">3</span>
                    </div>
                    
                    <div class="login-blocked-message" id="loginBlockedMessage" style="display: none;">
                        <i class="fas fa-ban me-1"></i> Terlalu banyak percobaan login. Silakan coba lagi dalam <span id="countdownTimer" class="login-countdown">30</span> detik.
                    </div>
                </div>
                <div class="login-footer">
                    <p class="mb-0 small">Gunakan kredensial yang diberikan admin untuk mengakses sistem</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/locales/bootstrap-datepicker.id.min.js"></script>
    
    <script>
        // Inisialisasi variabel global
        window.onload = function() {
            // Inisialisasi aplikasi
            initApp();
            
            // Tampilkan modal login saat halaman dimuat
            const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
            loginModal.show();
        };
        
        // Daftar desa yang sesuai dengan permintaan
        const daftarDesa = [
            "Agel", "Alas Bayur", "Alasmalang", "Alastengah", "Arjasa", "Ardirejo", "Asembagus", 
            "Awar-awar", "Awang-awang", "Baderan", "Balung", "Bantal", "Battal", "Bayeman", "Besuki", "Bletok", "Blimbing", "Bloro", "Buduan", "Bugeman", "Bungatan", 
            "Campoan", "Cemara", "Curah Cottok", "Curah Jeru", "Curah Kalak", "Curah Suri", "Curah Tatal", "Dawuhan", "Demung", "Duwet", "Gadingan", "Gebangan", 
            "Gelung", "Gudang", "Gunung Malang", "Gunung Putri", "Jangkar", "Jatisari", "Jatibanteng", "Jetis", "Juglangan", "Kalianget", "Kalibagor", "Kalimas", 
            "Kalirejo", "Kalisari", "Kandang", "Kayu Putih", "Kayumas", "Kedungdowo", "Kedunglo", "Kembangsari", "Ketah", "Ketowan", "Kilensari", "Klampokan", 
            "Klatakan", "Kotakan", "Kumbangsari", "Kukusan", "Lamongan", "Landangan", "Langkap", "Lebeng", "Lubawang", "Mangaran", "Mimbaan", "Mlandingan Kulon", 
            "Mlandingan Wetan", "Mojodungkol", "Mojosari", "Olean", "Palangan", "Panarukan", "Panji Kidul", "Panji Lor", "Parante", "Pasir Putih", "Patemon", 
            "Patokan", "Paowan", "Peleyan", "Pesisir", "Pesanggrahan", "Pategalan", "Patemon", "Plalangan", "Pokaan", "Rajekwesi", "Seletreng", "Selobanteng", 
            "Selomukti", "Selowogo", "Semambung", "Semiring", "Sliwung", "Sopet", "Sumber Pinang", "Sumberanyar", "Sumberargo", "Sumberkolak", "Sumberejo", 
            "Sumbertengah", "Sumberwaru", "Tamankursi", "Tamansari", "Taman", "Talkandang", "Tanjung Glugur", "Tanjung Kamal", "Tanjung Pecinan", "Tambak Ukir", 
            "Telempong", "Tenggir", "Tepos", "Tokelan", "Tlogosari", "Trigonco", "Trebungan", "Widoropayung", "Wonokoyo", "Wonorejo", "Wringinanom"
        ];
        
        // Fungsi inisialisasi aplikasi
        function initApp() {
            // Inisialisasi tahun dropdown (2020-2090)
            initTahunDropdown();
            
            // Inisialisasi dropdown desa
            initDesaDropdown();
            
            // Inisialisasi event listeners
            initEventListeners();
            
            // Load data dari localStorage
            loadData();
            
            // Update dashboard
            updateDashboard();
            
            // Update data table
            updateDataTable();
            
            // Update statistik
            updateStatistik();
        }
        
        // Inisialisasi dropdown tahun (2020-2090)
        function initTahunDropdown() {
            const tahunSelect = document.getElementById('tahun');
            const filterTahunSelect = document.getElementById('filterTahun');
            const laporanTahunSelect = document.getElementById('laporanTahun');
            
            // Kosongkan dropdown terlebih dahulu
            tahunSelect.innerHTML = '<option value="">Pilih Tahun</option>';
            filterTahunSelect.innerHTML = '<option value="">Semua Tahun</option>';
            laporanTahunSelect.innerHTML = '<option value="">Semua Tahun</option>';
            
            // Tambahkan opsi tahun dari 2020 hingga 2090
            for (let year = 2020; year <= 2090; year++) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                
                tahunSelect.appendChild(option.cloneNode(true));
                filterTahunSelect.appendChild(option.cloneNode(true));
                laporanTahunSelect.appendChild(option.cloneNode(true));
            }
            
            // Set tahun saat ini sebagai default
            const currentYear = new Date().getFullYear();
            tahunSelect.value = currentYear;
        }
        
        // Inisialisasi dropdown desa
        function initDesaDropdown() {
            const desaSelect = document.getElementById('desa');
            const filterDesaSelect = document.getElementById('filterDesa');
            const laporanDesaSelect = document.getElementById('laporanDesa');
            
            // Kosongkan dropdown terlebih dahulu
            desaSelect.innerHTML = '<option value="">Pilih Desa</option>';
            filterDesaSelect.innerHTML = '<option value="">Semua Desa</option>';
            laporanDesaSelect.innerHTML = '<option value="">Semua Desa</option>';
            
            // Tambahkan opsi desa
            daftarDesa.forEach(desa => {
                const option = document.createElement('option');
                option.value = desa;
                option.textContent = desa;
                
                desaSelect.appendChild(option.cloneNode(true));
                filterDesaSelect.appendChild(option.cloneNode(true));
                laporanDesaSelect.appendChild(option.cloneNode(true));
            });
        }
        
        // Inisialisasi event listeners
        function initEventListeners() {
            // Form input data
            document.getElementById('inputForm').addEventListener('submit', function(e) {
                e.preventDefault();
                simpanData();
            });
            
            // Validasi NIK (16 digit angka)
            document.getElementById('nik').addEventListener('input', function(e) {
                const nik = e.target.value;
                const errorElement = document.getElementById('nikError');
                
                // Hanya menerima angka
                e.target.value = e.target.value.replace(/\D/g, '');
                
                // Validasi panjang NIK
                if (nik.length !== 16 && nik.length > 0) {
                    e.target.classList.add('input-error');
                    errorElement.style.display = 'block';
                } else {
                    e.target.classList.remove('input-error');
                    errorElement.style.display = 'none';
                }
            });
            
            // Tombol filter
            document.getElementById('applyFilterBtn').addEventListener('click', function() {
                updateDataTable();
            });
            
            document.getElementById('resetFilterBtn').addEventListener('click', function() {
                document.getElementById('filterTahun').value = '';
                document.getElementById('filterJenis').value = '';
                document.getElementById('filterKecamatan').value = '';
                document.getElementById('filterDesa').value = '';
                updateDataTable();
            });
            
            // Tombol export
            document.getElementById('exportExcelBtn').addEventListener('click', exportToExcel);
            document.getElementById('exportPdfBtn').addEventListener('click', exportToPDF);
            
            // Tombol cetak laporan
            document.getElementById('cetakLaporanBtn').addEventListener('click', cetakLaporan);
            document.getElementById('unduhLaporanBtn').addEventListener('click', unduhLaporanPDF);
            
            // Tombol backup/restore data
            document.getElementById('backupDataBtn').addEventListener('click', backupData);
            document.getElementById('restoreFile').addEventListener('change', function(e) {
                document.getElementById('restoreDataBtn').disabled = !e.target.files.length;
            });
            document.getElementById('restoreDataBtn').addEventListener('click', restoreData);
            document.getElementById('hapusSemuaDataBtn').addEventListener('click', hapusSemuaData);
            
            // Mobile menu
            document.getElementById('mobileMenuBtn').addEventListener('click', toggleMobileMenu);
            document.getElementById('sidebarOverlay').addEventListener('click', toggleMobileMenu);
            
            // FAB button
            document.getElementById('fabBtn').addEventListener('click', function() {
                // Switch to input tab
                const inputTab = new bootstrap.Tab(document.getElementById('v-pills-input-tab'));
                inputTab.show();
                
                // Scroll to top
                window.scrollTo(0, 0);
            });
            
            // Logout button
            document.getElementById('logoutBtn').addEventListener('click', function() {
                localStorage.removeItem('isLoggedIn');
                window.location.reload();
            });
            
            // Login form
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                handleLogin();
            });
            
            // Toggle password visibility
            document.getElementById('togglePassword').addEventListener('click', function() {
                const passwordInput = document.getElementById('loginPassword');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    passwordInput.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });
        }
        
        // Fungsi untuk menangani login
        function handleLogin() {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            
            // Validasi sederhana (dalam aplikasi nyata, ini harus diganti dengan autentikasi yang aman)
            if (username === 'admin' && password === 'admin123') {
                localStorage.setItem('isLoggedIn', 'true');
                
                // Tutup modal login
                const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
                loginModal.hide();
                
                // Tampilkan notifikasi sukses
                showNotification('Login berhasil! Selamat datang di BARJAS.', 'success');
            } else {
                // Tampilkan notifikasi error
                showNotification('Username atau password salah. Silakan coba lagi.', 'error');
                
                // Reset form
                document.getElementById('loginPassword').value = '';
            }
        }
        
        // Fungsi untuk menyimpan data
        function simpanData() {
            // Validasi form
            if (!validateForm()) {
                showNotification('Harap perbaiki kesalahan pada form sebelum menyimpan.', 'error');
                return;
            }
            
            // Ambil nilai dari form
            const data = {
                id: Date.now(), // ID unik berdasarkan timestamp
                nama: document.getElementById('nama').value,
                nik: document.getElementById('nik').value,
                whatsapp: document.getElementById('whatsapp').value,
                namaKelompok: document.getElementById('namaKelompok').value || '-',
                jenisBantuan: document.getElementById('jenisBantuan').value,
                jumlahBantuan: parseInt(document.getElementById('jumlahBantuan').value),
                tanggal: document.getElementById('tanggal').value,
                tahun: document.getElementById('tahun').value,
                kecamatan: document.getElementById('kecamatan').value,
                desa: document.getElementById('desa').value,
                keterangan: document.getElementById('keterangan').value || '-',
                driveLink: document.getElementById('driveLink').value || '-',
                createdAt: new Date().toISOString()
            };
            
            // Ambil data yang sudah ada dari localStorage
            let existingData = JSON.parse(localStorage.getItem('barjasData')) || [];
            
            // Tambahkan data baru
            existingData.push(data);
            
            // Simpan kembali ke localStorage
            localStorage.setItem('barjasData', JSON.stringify(existingData));
            
            // Reset form
            document.getElementById('inputForm').reset();
            
            // Update dashboard dan tabel
            updateDashboard();
            updateDataTable();
            updateStatistik();
            
            // Tampilkan notifikasi sukses
            showNotification('Data berhasil disimpan!', 'success');
        }
        
        // Fungsi validasi form
        function validateForm() {
            let isValid = true;
            
            // Validasi Nama
            const nama = document.getElementById('nama');
            const namaError = document.getElementById('namaError');
            if (!nama.value.trim()) {
                nama.classList.add('input-error');
                namaError.style.display = 'block';
                isValid = false;
            } else {
                nama.classList.remove('input-error');
                namaError.style.display = 'none';
            }
            
            // Validasi NIK (wajib 16 digit angka)
            const nik = document.getElementById('nik');
            const nikError = document.getElementById('nikError');
            if (!nik.value || nik.value.length !== 16) {
                nik.classList.add('input-error');
                nikError.style.display = 'block';
                isValid = false;
            } else {
                nik.classList.remove('input-error');
                nikError.style.display = 'none';
            }
            
            // Validasi WhatsApp
            const whatsapp = document.getElementById('whatsapp');
            const whatsappError = document.getElementById('whatsappError');
            if (!whatsapp.value.trim()) {
                whatsapp.classList.add('input-error');
                whatsappError.style.display = 'block';
                isValid = false;
            } else {
                whatsapp.classList.remove('input-error');
                whatsappError.style.display = 'none';
            }
            
            // Validasi Jenis Bantuan
            const jenisBantuan = document.getElementById('jenisBantuan');
            const jenisBantuanError = document.getElementById('jenisBantuanError');
            if (!jenisBantuan.value) {
                jenisBantuan.classList.add('input-error');
                jenisBantuanError.style.display = 'block';
                isValid = false;
            } else {
                jenisBantuan.classList.remove('input-error');
                jenisBantuanError.style.display = 'none';
            }
            
            // Validasi Jumlah Bantuan
            const jumlahBantuan = document.getElementById('jumlahBantuan');
            const jumlahBantuanError = document.getElementById('jumlahBantuanError');
            if (!jumlahBantuan.value || parseInt(jumlahBantuan.value) <= 0) {
                jumlahBantuan.classList.add('input-error');
                jumlahBantuanError.style.display = 'block';
                isValid = false;
            } else {
                jumlahBantuan.classList.remove('input-error');
                jumlahBantuanError.style.display = 'none';
            }
            
            // Validasi Tanggal
            const tanggal = document.getElementById('tanggal');
            const tanggalError = document.getElementById('tanggalError');
            if (!tanggal.value) {
                tanggal.classList.add('input-error');
                tanggalError.style.display = 'block';
                isValid = false;
            } else {
                tanggal.classList.remove('input-error');
                tanggalError.style.display = 'none';
            }
            
            // Validasi Tahun
            const tahun = document.getElementById('tahun');
            const tahunError = document.getElementById('tahunError');
            if (!tahun.value) {
                tahun.classList.add('input-error');
                tahunError.style.display = 'block';
                isValid = false;
            } else {
                tahun.classList.remove('input-error');
                tahunError.style.display = 'none';
            }
            
            // Validasi Kecamatan
            const kecamatan = document.getElementById('kecamatan');
            const kecamatanError = document.getElementById('kecamatanError');
            if (!kecamatan.value.trim()) {
                kecamatan.classList.add('input-error');
                kecamatanError.style.display = 'block';
                isValid = false;
            } else {
                kecamatan.classList.remove('input-error');
                kecamatanError.style.display = 'none';
            }
            
            // Validasi Desa
            const desa = document.getElementById('desa');
            const desaError = document.getElementById('desaError');
            if (!desa.value) {
                desa.classList.add('input-error');
                desaError.style.display = 'block';
                isValid = false;
            } else {
                desa.classList.remove('input-error');
                desaError.style.display = 'none';
            }
            
            return isValid;
        }
        
        // Fungsi untuk memuat data dari localStorage
        function loadData() {
            const data = JSON.parse(localStorage.getItem('barjasData')) || [];
            return data;
        }
        
        // Fungsi untuk memperbarui dashboard
        function updateDashboard() {
            const data = loadData();
            
            // Hitung total penerima
            document.getElementById('totalPenerima').textContent = data.length;
            
            // Hitung total bantuan
            const totalBantuan = data.reduce((sum, item) => sum + (parseInt(item.jumlahBantuan) || 0), 0);
            document.getElementById('totalBantuan').textContent = totalBantuan.toLocaleString('id-ID');
            
            // Hitung jumlah kecamatan unik
            const kecamatanUnik = new Set(data.map(item => item.kecamatan)).size;
            document.getElementById('totalKecamatan').textContent = kecamatanUnik;
            
            // Tampilkan tahun aktif (tahun terbaru dari data atau tahun saat ini)
            const tahunAktif = data.length > 0 
                ? Math.max(...data.map(item => parseInt(item.tahun))) 
                : new Date().getFullYear();
            document.getElementById('tahunAktif').textContent = tahunAktif;
            
            // Update data terbaru
            updateRecentData(data);
            
            // Update chart
            updateDashboardCharts(data);
        }
        
        // Fungsi untuk memperbarui data terbaru di dashboard
        function updateRecentData(data) {
            const recentDataTable = document.getElementById('recentDataTable');
            
            // Kosongkan tabel
            recentDataTable.innerHTML = '';
            
            // Ambil 5 data terbaru
            const recentData = data
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                .slice(0, 5);
            
            if (recentData.length === 0) {
                recentDataTable.innerHTML = '<tr><td colspan="7" class="text-center">Tidak ada data</td></tr>';
                return;
            }
            
            // Tambahkan data ke tabel
            recentData.forEach(item => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${item.nama}</td>
                    <td>${item.nik}</td>
                    <td>${item.whatsapp}</td>
                    <td>${item.jenisBantuan}</td>
                    <td>${parseInt(item.jumlahBantuan).toLocaleString('id-ID')}</td>
                    <td>${formatDate(item.tanggal)}</td>
                    <td>
                        <button class="btn btn-sm btn-primary view-btn" data-id="${item.id}">
                            <i class="fas fa-eye"></i>
                        </button>
                    </td>
                `;
                
                recentDataTable.appendChild(row);
            });
            
            // Tambahkan event listener untuk tombol view
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    viewData(id);
                });
            });
        }
        
        // Fungsi untuk memperbarui chart di dashboard
        function updateDashboardCharts(data) {
            // Siapkan data untuk chart jenis bantuan
            const jenisBantuanCount = {};
            data.forEach(item => {
                jenisBantuanCount[item.jenisBantuan] = (jenisBantuanCount[item.jenisBantuan] || 0) + 1;
            });
            
            // Siapkan data untuk chart tren bulanan
            const monthlyData = {};
            data.forEach(item => {
                const month = item.tanggal.substring(0, 7); // Format YYYY-MM
                monthlyData[month] = (monthlyData[month] || 0) + 1;
            });
            
            // Buat chart jenis bantuan (pie chart)
            const jenisBantuanCtx = document.getElementById('jenisBantuanChart').getContext('2d');
            new Chart(jenisBantuanCtx, {
                type: 'pie',
                data: {
                    labels: Object.keys(jenisBantuanCount),
                    datasets: [{
                        data: Object.values(jenisBantuanCount),
                        backgroundColor: [
                            '#0d47a1', '#00695c', '#ff8f00', '#c62828', '#6a1b9a', 
                            '#2e7d32', '#ffd600', '#0277bd', '#ef6c00', '#4527a0'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        title: {
                            display: true,
                            text: 'Distribusi Jenis Bantuan'
                        }
                    }
                }
            });
            
            // Buat chart tren bulanan (line chart)
            const sortedMonths = Object.keys(monthlyData).sort();
            const trenBantuanCtx = document.getElementById('trenBantuanChart').getContext('2d');
            new Chart(trenBantuanCtx, {
                type: 'line',
                data: {
                    labels: sortedMonths,
                    datasets: [{
                        label: 'Jumlah Bantuan per Bulan',
                        data: sortedMonths.map(month => monthlyData[month]),
                        borderColor: '#0d47a1',
                        backgroundColor: 'rgba(13, 71, 161, 0.1)',
                        fill: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Tren Pemberian Bantuan'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    }
                }
            });
        }
        
        // Fungsi untuk memperbarui tabel data
        function updateDataTable() {
            const data = loadData();
            const tableBody = document.getElementById('dataTableBody');
            const showingEntries = document.getElementById('showingEntries');
            
            // Kosongkan tabel
            tableBody.innerHTML = '';
            
            // Ambil filter values
            const filterTahun = document.getElementById('filterTahun').value;
            const filterJenis = document.getElementById('filterJenis').value;
            const filterKecamatan = document.getElementById('filterKecamatan').value;
            const filterDesa = document.getElementById('filterDesa').value;
            
            // Filter data
            let filteredData = data;
            
            if (filterTahun) {
                filteredData = filteredData.filter(item => item.tahun === filterTahun);
            }
            
            if (filterJenis) {
                filteredData = filteredData.filter(item => item.jenisBantuan === filterJenis);
            }
            
            if (filterKecamatan) {
                filteredData = filteredData.filter(item => 
                    item.kecamatan.toLowerCase().includes(filterKecamatan.toLowerCase()));
            }
            
            if (filterDesa) {
                filteredData = filteredData.filter(item => item.desa === filterDesa);
            }
            
            // Tampilkan jumlah data yang ditampilkan
            showingEntries.textContent = `Menampilkan ${filteredData.length} dari ${data.length} data`;
            
            if (filteredData.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="13" class="text-center">Tidak ada data</td></tr>';
                return;
            }
            
            // Tambahkan data ke tabel
            filteredData.forEach((item, index) => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${item.nama}</td>
                    <td>${item.nik}</td>
                    <td>${item.whatsapp}</td>
                    <td>${item.jenisBantuan}</td>
                    <td>${parseInt(item.jumlahBantuan).toLocaleString('id-ID')}</td>
                    <td>${formatDate(item.tanggal)}</td>
                    <td>${item.tahun}</td>
                    <td>${item.kecamatan}</td>
                    <td>${item.desa}</td>
                    <td>${item.keterangan}</td>
                    <td>
                        ${item.driveLink !== '-' ? 
                            `<a href="${item.driveLink}" target="_blank" class="btn btn-view btn-sm">
                                <i class="fas fa-external-link-alt"></i> View
                            </a>` : 
                            '-'
                        }
                    </td>
                    <td>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-primary view-btn" data-id="${item.id}" title="Lihat Detail">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-warning edit-btn" data-id="${item.id}" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-danger delete-btn" data-id="${item.id}" title="Hapus">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Tambahkan event listeners untuk tombol aksi
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    viewData(id);
                });
            });
            
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    editData(id);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    deleteData(id);
                });
            });
        }
        
        // Fungsi untuk memperbarui statistik
        function updateStatistik() {
            const data = loadData();
            
            // Siapkan data untuk statistik per tahun
            const tahunData = {};
            data.forEach(item => {
                if (!tahunData[item.tahun]) {
                    tahunData[item.tahun] = {
                        count: 0,
                        total: 0
                    };
                }
                
                tahunData[item.tahun].count += 1;
                tahunData[item.tahun].total += parseInt(item.jumlahBantuan);
            });
            
            // Siapkan data untuk statistik per kecamatan
            const kecamatanData = {};
            data.forEach(item => {
                if (!kecamatanData[item.kecamatan]) {
                    kecamatanData[item.kecamatan] = {
                        count: 0,
                        total: 0
                    };
                }
                
                kecamatanData[item.kecamatan].count += 1;
                kecamatanData[item.kecamatan].total += parseInt(item.jumlahBantuan);
            });
            
            // Update tabel statistik per tahun
            const statistikTahunTable = document.getElementById('statistikTahunTable');
            statistikTahunTable.innerHTML = '';
            
            Object.keys(tahunData).sort().forEach(tahun => {
                const row = document.createElement('tr');
                const avg = tahunData[tahun].total / tahunData[tahun].count;
                
                row.innerHTML = `
                    <td>${tahun}</td>
                    <td>${tahunData[tahun].count}</td>
                    <td>${tahunData[tahun].total.toLocaleString('id-ID')}</td>
                    <td>${avg.toLocaleString('id-ID')}</td>
                `;
                
                statistikTahunTable.appendChild(row);
            });
            
            if (Object.keys(tahunData).length === 0) {
                statistikTahunTable.innerHTML = '<tr><td colspan="4" class="text-center">Tidak ada data</td></tr>';
            }
            
            // Update tabel statistik per kecamatan
            const statistikKecamatanTable = document.getElementById('statistikKecamatanTable');
            statistikKecamatanTable.innerHTML = '';
            
            Object.keys(kecamatanData).sort().forEach(kecamatan => {
                const row = document.createElement('tr');
                const avg = kecamatanData[kecamatan].total / kecamatanData[kecamatan].count;
                
                row.innerHTML = `
                    <td>${kecamatan}</td>
                    <td>${kecamatanData[kecamatan].count}</td>
                    <td>${kecamatanData[kecamatan].total.toLocaleString('id-ID')}</td>
                    <td>${avg.toLocaleString('id-ID')}</td>
                `;
                
                statistikKecamatanTable.appendChild(row);
            });
            
            if (Object.keys(kecamatanData).length === 0) {
                statistikKecamatanTable.innerHTML = '<tr><td colspan="4" class="text-center">Tidak ada data</td></tr>';
            }
            
            // Buat chart statistik per tahun
            const sortedTahun = Object.keys(tahunData).sort();
            const statistikTahunCtx = document.getElementById('statistikTahunChart').getContext('2d');
            
            if (window.statistikTahunChartInstance) {
                window.statistikTahunChartInstance.destroy();
            }
            
            window.statistikTahunChartInstance = new Chart(statistikTahunCtx, {
                type: 'bar',
                data: {
                    labels: sortedTahun,
                    datasets: [{
                        label: 'Jumlah Penerima',
                        data: sortedTahun.map(tahun => tahunData[tahun].count),
                        backgroundColor: '#0d47a1'
                    }, {
                        label: 'Total Bantuan',
                        data: sortedTahun.map(tahun => tahunData[tahun].total),
                        backgroundColor: '#00695c',
                        type: 'line',
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Statistik Bantuan per Tahun'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Jumlah Penerima'
                            }
                        },
                        y1: {
                            beginAtZero: true,
                            position: 'right',
                            grid: {
                                drawOnChartArea: false
                            },
                            title: {
                                display: true,
                                text: 'Total Bantuan'
                            }
                        }
                    }
                }
            });
            
            // Buat chart statistik per kecamatan (hanya tampilkan 10 teratas)
            const sortedKecamatan = Object.keys(kecamatanData)
                .sort((a, b) => kecamatanData[b].count - kecamatanData[a].count)
                .slice(0, 10);
                
            const statistikKecamatanCtx = document.getElementById('statistikKecamatanChart').getContext('2d');
            
            if (window.statistikKecamatanChartInstance) {
                window.statistikKecamatanChartInstance.destroy();
            }
            
            window.statistikKecamatanChartInstance = new Chart(statistikKecamatanCtx, {
                type: 'pie',
                data: {
                    labels: sortedKecamatan,
                    datasets: [{
                        data: sortedKecamatan.map(kecamatan => kecamatanData[kecamatan].count),
                        backgroundColor: [
                            '#0d47a1', '#00695c', '#ff8f00', '#c62828', '#6a1b9a', 
                            '#2e7d32', '#ffd600', '#0277bd', '#ef6c00', '#4527a0'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        title: {
                            display: true,
                            text: '10 Kecamatan dengan Penerima Terbanyak'
                        }
                    }
                }
            });
        }
        
        // Fungsi untuk melihat detail data
        function viewData(id) {
            const data = loadData();
            const item = data.find(d => d.id == id);
            
            if (!item) {
                showNotification('Data tidak ditemukan.', 'error');
                return;
            }
            
            // Tampilkan modal dengan detail data
            // (Implementasi modal detail bisa ditambahkan di sini)
            alert(`Detail Data:\nNama: ${item.nama}\nNIK: ${item.nik}\nWhatsApp: ${item.whatsapp}\nJenis Bantuan: ${item.jenisBantuan}\nJumlah: ${item.jumlahBantuan}\nTanggal: ${formatDate(item.tanggal)}\nTahun: ${item.tahun}\nKecamatan: ${item.kecamatan}\nDesa: ${item.desa}\nKeterangan: ${item.keterangan}`);
        }
        
        // Fungsi untuk mengedit data
        function editData(id) {
            const data = loadData();
            const item = data.find(d => d.id == id);
            
            if (!item) {
                showNotification('Data tidak ditemukan.', 'error');
                return;
            }
            
            // Isi form dengan data yang akan diedit
            document.getElementById('nama').value = item.nama;
            document.getElementById('nik').value = item.nik;
            document.getElementById('whatsapp').value = item.whatsapp;
            document.getElementById('namaKelompok').value = item.namaKelompok !== '-' ? item.namaKelompok : '';
            document.getElementById('jenisBantuan').value = item.jenisBantuan;
            document.getElementById('jumlahBantuan').value = item.jumlahBantuan;
            document.getElementById('tanggal').value = item.tanggal;
            document.getElementById('tahun').value = item.tahun;
            document.getElementById('kecamatan').value = item.kecamatan;
            document.getElementById('desa').value = item.desa;
            document.getElementById('keterangan').value = item.keterangan !== '-' ? item.keterangan : '';
            document.getElementById('driveLink').value = item.driveLink !== '-' ? item.driveLink : '';
            
            // Hapus data lama
            const newData = data.filter(d => d.id != id);
            localStorage.setItem('barjasData', JSON.stringify(newData));
            
            // Scroll ke form input
            document.getElementById('v-pills-input-tab').click();
            
            // Tampilkan notifikasi
            showNotification('Data telah dimuat ke form. Silakan edit dan simpan kembali.', 'info');
        }
        
        // Fungsi untuk menghapus data
        function deleteData(id) {
            if (!confirm('Apakah Anda yakin ingin menghapus data ini?')) {
                return;
            }
            
            const data = loadData();
            const newData = data.filter(d => d.id != id);
            localStorage.setItem('barjasData', JSON.stringify(newData));
            
            // Perbarui tampilan
            updateDashboard();
            updateDataTable();
            updateStatistik();
            
            // Tampilkan notifikasi
            showNotification('Data berhasil dihapus.', 'success');
        }
        
        // Fungsi untuk mengekspor data ke Excel
        function exportToExcel() {
            const data = loadData();
            
            if (data.length === 0) {
                showNotification('Tidak ada data untuk diekspor.', 'warning');
                return;
            }
            
            // Siapkan data untuk Excel
            const excelData = data.map(item => ({
                'Nama': item.nama,
                'NIK': item.nik,
                'WhatsApp': item.whatsapp,
                'Nama Kelompok': item.namaKelompok,
                'Jenis Bantuan': item.jenisBantuan,
                'Jumlah Bantuan': item.jumlahBantuan,
                'Tanggal': formatDate(item.tanggal),
                'Tahun': item.tahun,
                'Kecamatan': item.kecamatan,
                'Desa': item.desa,
                'Keterangan': item.keterangan,
                'Drive Link': item.driveLink
            }));
            
            // Buat worksheet
            const ws = XLSX.utils.json_to_sheet(excelData);
            
            // Buat workbook
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Data Bantuan');
            
            // Export ke file
            const date = new Date().toISOString().slice(0, 10);
            XLSX.writeFile(wb, `Data_Bantuan_${date}.xlsx`);
            
            // Tampilkan notifikasi
            showNotification('Data berhasil diekspor ke Excel.', 'success');
        }
        
        // Fungsi untuk mengekspor data ke PDF
        function exportToPDF() {
            const data = loadData();
            
            if (data.length === 0) {
                showNotification('Tidak ada data untuk diekspor.', 'warning');
                return;
            }
            
            // Siapkan data untuk PDF
            const pdfData = data.map(item => [
                item.nama,
                item.nik,
                item.whatsapp,
                item.jenisBantuan,
                parseInt(item.jumlahBantuan).toLocaleString('id-ID'),
                formatDate(item.tanggal),
                item.tahun,
                item.kecamatan,
                item.desa
            ]);
            
            // Buat PDF
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Judul
            doc.setFontSize(18);
            doc.text('LAPORAN DATA BANTUAN', 105, 15, { align: 'center' });
            doc.setFontSize(12);
            doc.text(`Tanggal Cetak: ${formatDate(new Date().toISOString().slice(0, 10))}`, 105, 22, { align: 'center' });
            
            // Tabel
            doc.autoTable({
                head: [['Nama', 'NIK', 'WhatsApp', 'Jenis', 'Jumlah', 'Tanggal', 'Tahun', 'Kecamatan', 'Desa']],
                body: pdfData,
                startY: 30,
                theme: 'grid',
                headStyles: {
                    fillColor: [13, 71, 161]
                }
            });
            
            // Simpan PDF
            const date = new Date().toISOString().slice(0, 10);
            doc.save(`Data_Bantuan_${date}.pdf`);
            
            // Tampilkan notifikasi
            showNotification('Data berhasil diekspor ke PDF.', 'success');
        }
        
        // Fungsi untuk mencetak laporan
        function cetakLaporan() {
            // Ambil nilai filter
            const tahun = document.getElementById('laporanTahun').value;
            const jenis = document.getElementById('laporanJenis').value;
            const kecamatan = document.getElementById('laporanKecamatan').value;
            const desa = document.getElementById('laporanDesa').value;
            
            // Simpan filter di sessionStorage untuk digunakan saat mencetak
            sessionStorage.setItem('printFilter', JSON.stringify({
                tahun, jenis, kecamatan, desa
            }));
            
            // Cetak halaman
            window.print();
        }
        
        // Fungsi untuk mengunduh laporan sebagai PDF
        function unduhLaporanPDF() {
            // Ambil nilai filter
            const tahun = document.getElementById('laporanTahun').value;
            const jenis = document.getElementById('laporanJenis').value;
            const kecamatan = document.getElementById('laporanKecamatan').value;
            const desa = document.getElementById('laporanDesa').value;
            
            // Filter data
            let data = loadData();
            
            if (tahun) {
                data = data.filter(item => item.tahun === tahun);
            }
            
            if (jenis) {
                data = data.filter(item => item.jenisBantuan === jenis);
            }
            
            if (kecamatan) {
                data = data.filter(item => 
                    item.kecamatan.toLowerCase().includes(kecamatan.toLowerCase()));
            }
            
            if (desa) {
                data = data.filter(item => item.desa === desa);
            }
            
            if (data.length === 0) {
                showNotification('Tidak ada data untuk laporan.', 'warning');
                return;
            }
            
            // Siapkan data untuk PDF
            const pdfData = data.map(item => [
                item.nama,
                item.nik,
                item.whatsapp,
                item.jenisBantuan,
                parseInt(item.jumlahBantuan).toLocaleString('id-ID'),
                formatDate(item.tanggal),
                item.tahun,
                item.kecamatan,
                item.desa
            ]);
            
            // Buat PDF
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('landscape');
            
            // Judul
            doc.setFontSize(18);
            doc.text('LAPORAN DATA BANTUAN', 145, 15, { align: 'center' });
            doc.setFontSize(12);
            
            // Info filter
            let filterInfo = 'Semua Data';
            if (tahun || jenis || kecamatan || desa) {
                filterInfo = 'Filter: ';
                const filters = [];
                if (tahun) filters.push(`Tahun: ${tahun}`);
                if (jenis) filters.push(`Jenis: ${jenis}`);
                if (kecamatan) filters.push(`Kecamatan: ${kecamatan}`);
                if (desa) filters.push(`Desa: ${desa}`);
                filterInfo += filters.join(', ');
            }
            
            doc.text(filterInfo, 145, 22, { align: 'center' });
            doc.text(`Tanggal Cetak: ${formatDate(new Date().toISOString().slice(0, 10))}`, 145, 29, { align: 'center' });
            
            // Tabel
            doc.autoTable({
                head: [['Nama', 'NIK', 'WhatsApp', 'Jenis', 'Jumlah', 'Tanggal', 'Tahun', 'Kecamatan', 'Desa']],
                body: pdfData,
                startY: 35,
                theme: 'grid',
                headStyles: {
                    fillColor: [13, 71, 161]
                }
            });
            
            // Simpan PDF
            const date = new Date().toISOString().slice(0, 10);
            doc.save(`Laporan_Bantuan_${date}.pdf`);
            
            // Tampilkan notifikasi
            showNotification('Laporan berhasil diunduh sebagai PDF.', 'success');
        }
        
        // Fungsi untuk backup data
        function backupData() {
            const data = loadData();
            
            if (data.length === 0) {
                showNotification('Tidak ada data untuk dibackup.', 'warning');
                return;
            }
            
            // Buat blob dari data
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            // Buat link download
            const a = document.createElement('a');
            const date = new Date().toISOString().slice(0, 10);
            a.href = url;
            a.download = `backup_barjas_${date}.json`;
            a.click();
            
            // Bersihkan URL
            URL.revokeObjectURL(url);
            
            // Update last backup date
            document.getElementById('lastBackupDate').textContent = new Date().toLocaleDateString('id-ID');
            
            // Tampilkan notifikasi
            showNotification('Backup data berhasil.', 'success');
        }
        
        // Fungsi untuk restore data
        function restoreData() {
            const fileInput = document.getElementById('restoreFile');
            const file = fileInput.files[0];
            
            if (!file) {
                showNotification('Pilih file backup terlebih dahulu.', 'warning');
                return;
            }
            
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    // Validasi data
                    if (!Array.isArray(data)) {
                        throw new Error('Format data tidak valid.');
                    }
                    
                    // Simpan data
                    localStorage.setItem('barjasData', JSON.stringify(data));
                    
                    // Perbarui tampilan
                    updateDashboard();
                    updateDataTable();
                    updateStatistik();
                    
                    // Reset file input
                    fileInput.value = '';
                    document.getElementById('restoreDataBtn').disabled = true;
                    
                    // Tampilkan notifikasi
                    showNotification('Data berhasil direstore.', 'success');
                } catch (error) {
                    showNotification('Gagal memproses file backup: ' + error.message, 'error');
                }
            };
            
            reader.readAsText(file);
        }
        
        // Fungsi untuk menghapus semua data
        function hapusSemuaData() {
            if (!confirm('Apakah Anda yakin ingin menghapus semua data? Tindakan ini tidak dapat dibatalkan!')) {
                return;
            }
            
            // Hapus data
            localStorage.removeItem('barjasData');
            
            // Perbarui tampilan
            updateDashboard();
            updateDataTable();
            updateStatistik();
            
            // Tampilkan notifikasi
            showNotification('Semua data berhasil dihapus.', 'success');
        }
        
        // Fungsi untuk menampilkan notifikasi
        function showNotification(message, type = 'info') {
            const toast = document.querySelector('.notification-toast');
            const toastMessage = document.getElementById('toastMessage');
            
            // Set pesan dan warna berdasarkan type
            toastMessage.textContent = message;
            
            // Tampilkan toast
            const bsToast = new bootstrap.Toast(toast);
            bsToast.show();
        }
        
        // Fungsi untuk memformat tanggal
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('id-ID', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
        }
        
        // Fungsi untuk toggle mobile menu
        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebarMenu');
            const overlay = document.getElementById('sidebarOverlay');
            
            sidebar.classList.toggle('mobile-show');
            overlay.classList.toggle('mobile-show');
        }
        
        // Fungsi untuk inisialisasi datepicker
        function initDatepicker() {
            $('#tanggal').datepicker({
                format: 'yyyy-mm-dd',
                autoclose: true,
                todayHighlight: true,
                language: 'id'
            });
        }
        
        // Panggil initDatepicker setelah DOM selesai dimuat
        document.addEventListener('DOMContentLoaded', function() {
            initDatepicker();
        });
    </script>
</body>
</html>
